import{ar as q,as as V,at as G,au as U}from"./chunk-C4bXDfxA.js";function $(n){switch(n.type){case"CIMPointSymbol":{const t=n.symbolLayers;if(!t||t.length!==1)return null;const r=t[0];return r.type!=="CIMVectorMarker"?null:$(r)}case"CIMVectorMarker":{const t=n.markerGraphics;if(!t||t.length!==1)return null;const r=t[0];if(!r)return null;const o=r.geometry;if(!o)return null;const s=r.symbol;return!s||s.type!=="CIMPolygonSymbol"&&s.type!=="CIMLineSymbol"||s.symbolLayers?.some(l=>!!l.effects)?null:{type:"sdf",geom:o,asFill:s.type==="CIMPolygonSymbol"}}}}function j(n){return n?n.rings?n.rings:n.paths?n.paths:n.xmin!==void 0&&n.ymin!==void 0&&n.xmax!==void 0&&n.ymax!==void 0?[[[n.xmin,n.ymin],[n.xmin,n.ymax],[n.xmax,n.ymax],[n.xmax,n.ymin],[n.xmin,n.ymin]]]:null:null}function z(n){let t=1/0,r=-1/0,o=1/0,s=-1/0;for(const l of n)for(const e of l)e[0]<t&&(t=e[0]),e[0]>r&&(r=e[0]),e[1]<o&&(o=e[1]),e[1]>s&&(s=e[1]);return new U(t,o,r-t,s-o)}function A(n){let t=1/0,r=-1/0,o=1/0,s=-1/0;for(const l of n)for(const e of l)e[0]<t&&(t=e[0]),e[0]>r&&(r=e[0]),e[1]<o&&(o=e[1]),e[1]>s&&(s=e[1]);return[t,o,r,s]}function J(n){return n?n.rings?A(n.rings):n.paths?A(n.paths):q(n)?[n.xmin,n.ymin,n.xmax,n.ymax]:null:null}function K(n,t,r,o,s){const[l,e,a,u]=n;if(a<l||u<e)return[0,0,0,1];const f=a-l,i=u-e,m=128,c=V,M=Math.floor(.5*(.5*m-c)),h=(m-2*(M+c))/Math.max(f,i),p=Math.round(f*h)+2*M,d=Math.round(i*h)+2*M;let b=1;t&&(b=d/h/(t.ymax-t.ymin));let x=0,g=0,y=1;o&&(s?t&&r&&t.ymax-t.ymin>0&&(y=(t.xmax-t.xmin)/(t.ymax-t.ymin),x=o.x/(r*y),g=o.y/r):(x=o.x,g=o.y)),t&&(x=.5*(t.xmax+t.xmin)+x*(t.xmax-t.xmin),g=.5*(t.ymax+t.ymin)+g*(t.ymax-t.ymin)),x-=l,g-=e,x*=h,g*=h,x+=M,g+=M;let w=x/p-.5,v=g/d-.5;return s&&r&&(w*=r*y,v*=r),[b,w,v,y]}function N(n){const t=j(n.geom),r=z(t),o=128,s=V,l=Math.floor(.5*(.5*o-s)),e=(o-2*(l+s))/Math.max(r.width,r.height),a=Math.round(r.width*e)+2*l,u=Math.round(r.height*e)+2*l,f=[];for(const m of t)if(m&&m.length>1){const c=[];for(const M of m){let[h,p]=M;h-=r.x,p-=r.y,h*=e,p*=e,h+=l-.5,p+=l-.5,n.asFill?c.push([h,p]):c.push([Math.round(h),Math.round(p)])}if(n.asFill){const M=c.length-1;c[0][0]===c[M][0]&&c[0][1]===c[M][1]||c.push(c[0])}f.push(c)}const i=B(f,a,u,l);return n.asFill&&D(f,a,u,l,i),[E(i,l),a,u]}function B(n,t,r,o){const s=t*r,l=new Array(s),e=o*o+1;for(let a=0;a<s;++a)l[a]=e;for(const a of n){const u=a.length;for(let f=1;f<u;++f){const i=a[f-1],m=a[f];let c,M,h,p;i[0]<m[0]?(c=i[0],M=m[0]):(c=m[0],M=i[0]),i[1]<m[1]?(h=i[1],p=m[1]):(h=m[1],p=i[1]);let d=Math.floor(c)-o,b=Math.floor(M)+o,x=Math.floor(h)-o,g=Math.floor(p)+o;d<0&&(d=0),b>t&&(b=t),x<0&&(x=0),g>r&&(g=r);const y=m[0]-i[0],w=m[1]-i[1],v=y*y+w*w;for(let C=d;C<b;C++)for(let I=x;I<g;I++){let F,S,k=(C-i[0])*y+(I-i[1])*w;k<0?(F=i[0],S=i[1]):k>v?(F=m[0],S=m[1]):(k/=v,F=i[0]+k*y,S=i[1]+k*w);const L=(C-F)*(C-F)+(I-S)*(I-S),P=(r-I-1)*t+C;L<l[P]&&(l[P]=L)}}}for(let a=0;a<s;++a)l[a]=Math.sqrt(l[a]);return l}function D(n,t,r,o,s){for(const l of n){const e=l.length;for(let a=1;a<e;++a){const u=l[a-1],f=l[a];let i,m,c,M;u[0]<f[0]?(i=u[0],m=f[0]):(i=f[0],m=u[0]),u[1]<f[1]?(c=u[1],M=f[1]):(c=f[1],M=u[1]);let h=Math.floor(i),p=Math.floor(m)+1,d=Math.floor(c),b=Math.floor(M)+1;h<o&&(h=o),p>t-o&&(p=t-o),d<o&&(d=o),b>r-o&&(b=r-o);for(let x=d;x<b;++x){if(u[1]>x==f[1]>x)continue;const g=(r-x-1)*t;for(let y=h;y<p;++y)y<(f[0]-u[0])*(x-u[1])/(f[1]-u[1])+u[0]&&(s[g+y]=-s[g+y]);for(let y=o;y<h;++y)s[g+y]=-s[g+y]}}}}function E(n,t){const r=2*t,o=n.length,s=new Uint8Array(4*o);for(let l=0;l<o;++l){const e=.5-n[l]/r;G(e,s,4*l)}return s}export{N as a,$ as e,J as f,K as m};
