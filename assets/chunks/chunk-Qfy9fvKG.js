import{n6 as $,j6 as g,n7 as j,n8 as S,n9 as b,na as f,b3 as M,cv as u,nb as z,ex as v,iF as D,cl as x,ja as N,nc as Z,nd as T,dW as w,ci as y,eh as h,ne as P,nf as Y,ng as E,nh as G,kQ as U,cj as O,ep as W,eq as X,ni as A,l6 as k,dI as R}from"./chunk-C4bXDfxA.js";function B(t,n){return H(t,()=>n)}function it(t){return H(t,n=>n.plane)}function H(t,n){const e=u(),r=u();let l=!1;return a=>{const o=n(a);if(a.action==="start"){const i=g(a.screenStart,j(S.get())),s=b(t.state.camera,i,C);s!=null&&(l=f(o,s,e))}if(!l)return null;const c=g(a.screenEnd,j(S.get())),d=b(t.state.camera,c,C);return d==null?null:f(o,d,r)?{...a,renderStart:e,renderEnd:r,plane:o,ray:d}:null}}function F(t,n,e=0,r=null,l=null){let a=null;return o=>{if(o.action==="start"&&(a=t.sceneIntersectionHelper.intersectElevationFromScreen(N(o.screenStart.x,o.screenStart.y),n,e,l),a!=null&&r!=null&&!Z(a,a,r))||a==null)return null;const c=t.sceneIntersectionHelper.intersectElevationFromScreen(N(o.screenEnd.x,o.screenEnd.y),n,e,l);return c!=null&&(r==null||Z(c,c,r))?{...o,mapStart:a,mapEnd:c}:null}}function J(t,n,e,r=null,l=null){return F(t,e,z(n,t,e),r,l)}function Q(t,n,e,r=null,l=null){return J(t,e,v(n),r,l)}function ut(t,n,e,r){const l=n.toMap(t.screenStart,{include:[e]});return l!=null?Q(n,e,l,r):null}function V(t,n){const e=_,r=tt,l=T();t.renderCoordsHelper.worldUpAtPosition(n,e);const a=w(h(l),e,y(r,n,t.state.camera.eye));return w(a,a,e),P(n,a,l)}function dt(t,n,e){let r=null;const l=new Y;return l.next(B(t,V(t,n))).next(q(t,n)).next(K(t,e)).next(a=>{a.mapEnd.x=a.mapStart.x,a.mapEnd.y=a.mapStart.y,r=a}),a=>(r=null,l.execute(a),r)}function q(t,n){const e=u(),r=D(n);t.renderCoordsHelper.worldUpAtPosition(n,e);const l=u(),a=u(),o=c=>(y(c,c,n),E(e,c,c),t.viewingMode==="global"&&D(c)*Math.sign(G(e,c))<.001-r&&y(c,U(c,e,.001),n),O(c,c,n),c);return c=>(c.renderStart=o(x(l,c.renderStart)),c.renderEnd=o(x(a,c.renderEnd)),c)}function K(t,n){const e=t.renderCoordsHelper;return r=>{const l=e.fromRenderCoords(r.renderStart,new M({spatialReference:n})),a=e.fromRenderCoords(r.renderEnd,new M({spatialReference:n}));return l!=null&&a!=null?{...r,mapStart:l,mapEnd:a}:null}}var m;function It(t){let n=null;return e=>{switch(e.action){case"start":n=t.disableDisplay();break;case"end":case"cancel":n!=null&&(n.remove(),n=null)}return e}}function mt(t,n=null){const e=W(t.state.viewingMode);e.options.selectionMode=!0,e.options.store=X.MIN,e.options.hud=!1;const r=N(),l={requiresGroundFeedback:!0,enableDraped:!0,exclude:new Set},a=u(),o=n??t.spatialReference,c=i=>{t.map.ground&&t.map.ground.opacity<1?l.exclude.add(A):l.exclude.delete(A),t.sceneIntersectionHelper.intersectIntersectorScreen(g(i,r),e,l);const s=e.results.min;let I;if(s.getIntersectionPoint(a))I=s.intersector===k.TERRAIN?m.GROUND:m.OTHER;else{if(!e.results.ground.getIntersectionPoint(a))return null;I=m.GROUND}return{location:t.renderCoordsHelper.fromRenderCoords(a,new M({spatialReference:o})),surfaceType:I}};let d;return i=>{if(i.action==="start"){const I=c(i.screenStart);d=I!=null?I.location:null}if(d==null)return null;const s=c(i.screenEnd);return s?.location!=null?{...i,mapStart:d,mapEnd:s.location,surfaceType:s.surfaceType}:null}}(function(t){t[t.GROUND=0]="GROUND",t[t.OTHER=1]="OTHER"})(m||(m={}));const _=u(),tt=u(),C=$(),nt="theme-style";function L(t,n){return lt(at(et(rt(t),n)),n.size)}function et(t,{accentColor:n,contrastColor:e}){const r=n.toHex(),l=n.a,a=e.toHex(),o=e.a,c=t.getElementsByTagNameNS("http://www.w3.org/2000/svg","style").namedItem(nt);return c&&(c.innerHTML=`
      .contrast-fill { fill: ${a}; fill-opacity: ${o}; }
      .contrast-stroke { stroke: ${a}; stroke-opacity: ${o};  }
      .accent-fill { fill: ${r}; fill-opacity: ${l}; }
      .accent-stroke { stroke: ${r}; stroke-opacity:  ${l}; }`),t}function rt(t){const n=t.split(",")[1],e=atob(n);return new DOMParser().parseFromString(e,"image/svg+xml")}function at(t){const n=new XMLSerializer().serializeToString(t);return`data:image/svg+xml;base64,${btoa(n)}`}function lt(t,n){const e=new Image(n,n);return e.src=t,e}const ct="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1NiIgaGVpZ2h0PSI1NiIgZmlsbD0ibm9uZSIgdmVyc2lvbj0iMi4wIj48c3R5bGUgaWQ9InRoZW1lLXN0eWxlIj4uY29udHJhc3QtZmlsbHtmaWxsOiNmZmZ9LmNvbnRyYXN0LXN0cm9rZXtzdHJva2U6I2ZmZn0uYWNjZW50LWZpbGx7ZmlsbDojZmY3ZjAwO2ZpbGwtb3BhY2l0eTouNX08L3N0eWxlPjxwYXRoIGQ9Ik0yOCAwYTI4IDI4IDAgMSAxIDAgNTYgMjggMjggMCAwIDEgMC01NiIgY2xhc3M9ImFjY2VudC1maWxsIi8+PHBhdGggc3Ryb2tlLXdpZHRoPSI0Ljk5IiBkPSJNMjAuMDUgNDAuODZhMTUuMDUgMTUuMDUgMCAwIDAgMTcuMTQtMS41IDE1LjA1IDE1LjA1IDAgMCAwIDQuNDctMTYuNjUgMTUuMDUgMTUuMDUgMCAwIDAtMjIuNzItNy4xNSAxNS4wNSAxNS4wNSAwIDAgMC01LjUgNy4xNSIgY2xhc3M9ImNvbnRyYXN0LXN0cm9rZSIvPjxwYXRoIGQ9Im0xMC45NyAzNS41NyA1LjM4IDEyLjA3IDcuNzktMTMuNDd6IiBjbGFzcz0iY29udHJhc3QtZmlsbCIvPjwvc3ZnPg==",ot="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1NiIgaGVpZ2h0PSI1NiIgZmlsbD0ibm9uZSIgdmVyc2lvbj0iMi4wIj48c3R5bGUgaWQ9InRoZW1lLXN0eWxlIj4uY29udHJhc3QtZmlsbHtmaWxsOiNmZmZ9LmNvbnRyYXN0LXN0cm9rZXtzdHJva2U6I2ZmZn0uYWNjZW50LWZpbGx7ZmlsbDojZmY3ZjAwO2ZpbGwtb3BhY2l0eTouNX08L3N0eWxlPjxjaXJjbGUgY3g9IjM5LjQ3OCIgY3k9IjMuMDc4IiByPSIyOCIgY2xhc3M9ImFjY2VudC1maWxsIiB0cmFuc2Zvcm09InJvdGF0ZSg0MC41NDIpIi8+PHBhdGggc3Ryb2tlLXdpZHRoPSI1IiBkPSJtNy4wNzQgMzAuMDUzIDI5LjM5NyAxMS45ODUtMy42NzMtMzMuNDkzIiBjbGFzcz0iY29udHJhc3Qtc3Ryb2tlIi8+PHBhdGggc3Ryb2tlLXdpZHRoPSIyLjk5NiIgZD0iTTI0LjUwNCAyMy4yMDdhMTEuOTggMTEuOTggMCAwIDAtOS44IDcuNTA3IiBjbGFzcz0iY29udHJhc3Qtc3Ryb2tlIGNvbnRyYXN0LWZpbGwiLz48cGF0aCBkPSJtMjkuODE4IDIyLjgwOC02LjE4NCA0LjYtLjU0MS04LjM2NHoiIGNsYXNzPSJjb250cmFzdC1maWxsIi8+PC9zdmc+",p=64;function pt(t,n){const{accentColor:e,contrastColor:r,preMultiplyAlpha:l}=n;return t.fromData(`heading-rotate:[accent:${e},contrast:${r},size:${p}]`,()=>new R(L(ct,{accentColor:e,contrastColor:r,size:p}),{mipmap:!0,reloadable:!0,preMultiplyAlpha:l}))}function gt(t,n){const{accentColor:e,contrastColor:r,preMultiplyAlpha:l}=n;return t.fromData(`tilt-rotate:[accent:${e},contrast:${r},size:${p}]`,()=>new R(L(ot,{accentColor:e,contrastColor:r,size:p}),{mipmap:!0,reloadable:!0,preMultiplyAlpha:l}))}export{K as A,it as C,J as D,Q as M,ut as N,B as O,dt as k,pt as l,gt as n,It as q,mt as z};
