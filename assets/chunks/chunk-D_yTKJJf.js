let T;function l(t){return typeof T[t]=="function"?T[t]=T[t](globalThis):T[t]}T=globalThis.dojoConfig?.has||globalThis.esriConfig?.has?{...globalThis.dojoConfig?.has,...globalThis.esriConfig?.has}:{},l.add=(t,e,r,n)=>((n||T[t]===void 0)&&(T[t]=e),r&&l(t)),l.cache=T,l.add("big-integer-warning-enabled",!0),l.add("esri-deprecation-warnings",!0),l.add("esri-tests-disable-screenshots",!1),l.add("esri-tests-use-full-window",!1),l.add("esri-tests-post-to-influx",!0),(()=>{l.add("host-webworker",globalThis.WorkerGlobalScope!==void 0&&self instanceof globalThis.WorkerGlobalScope);const t=typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document;if(l.add("host-browser",t),l.add("host-node",typeof globalThis.process=="object"&&globalThis.process.versions?.node&&globalThis.process.versions.v8),l.add("dom",t),l("host-browser")){const e=navigator,r=e.userAgent,n=e.appVersion,s=parseFloat(n);if(l.add("wp",parseFloat(r.split("Windows Phone")[1])||void 0),l.add("msapp",parseFloat(r.split("MSAppHost/")[1])||void 0),l.add("khtml",n.includes("Konqueror")?s:void 0),l.add("edge",parseFloat(r.split("Edge/")[1])||void 0),l.add("opr",parseFloat(r.split("OPR/")[1])||void 0),l.add("webkit",!l("wp")&&!l("edge")&&parseFloat(r.split("WebKit/")[1])||void 0),l.add("chrome",!l("edge")&&!l("opr")&&parseFloat(r.split("Chrome/")[1])||void 0),l.add("android",!l("wp")&&parseFloat(r.split("Android ")[1])||void 0),l.add("safari",!n.includes("Safari")||l("wp")||l("chrome")||l("android")||l("edge")||l("opr")?void 0:parseFloat(n.split("Version/")[1])),l.add("mac",n.includes("Macintosh")),!l("wp")&&/(iPhone|iPod|iPad)/.test(r)){const o=RegExp.$1.replace(/P/,"p"),a=/OS ([\d_]+)/.test(r)?RegExp.$1:"1",i=parseFloat(a.replace(/_/,".").replaceAll("_",""));l.add(o,i),l.add("ios",i)}l("webkit")||(!r.includes("Gecko")||l("wp")||l("khtml")||l("edge")||l.add("mozilla",s),l("mozilla")&&l.add("ff",parseFloat(r.split("Firefox/")[1]||r.split("Minefield/")[1])||void 0))}})(),(()=>{if(globalThis.navigator){const t=navigator.userAgent,e=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i.test(t),r=/iPhone/i.test(t);e&&l.add("esri-mobile",e),r&&l.add("esri-iPhone",r),l.add("esri-geolocation",!!navigator.geolocation)}l.add("esri-wasm","WebAssembly"in globalThis),l.add("esri-performance-mode-frames-between-render",20),l.add("esri-force-performance-mode",!1),l.add("esri-shared-array-buffer",()=>{const t="SharedArrayBuffer"in globalThis,e=globalThis.crossOriginIsolated===!1;return t&&!e}),l.add("wasm-simd",()=>{const t=[0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11];return WebAssembly.validate(new Uint8Array(t))}),l.add("esri-atomics","Atomics"in globalThis),l.add("esri-workers","Worker"in globalThis),l.add("web-feat:cache","caches"in globalThis),l.add("esri-workers-arraybuffer-transfer",!l("safari")||Number(l("safari"))>=12),l.add("workers-pool-size",8),l.add("featurelayer-simplify-thresholds",[.5,.5,.5,.5]),l.add("featurelayer-simplify-payload-size-factors",[1,1,4]),l.add("featurelayer-fast-triangulation-enabled",!0),l.add("featurelayer-animation-enabled",!0),l.add("featurelayer-snapshot-enabled",!0),l.add("featurelayer-snapshot-point-min-threshold",8e4),l.add("featurelayer-snapshot-point-max-threshold",4e5),l.add("featurelayer-snapshot-point-coverage",.1),l.add("featurelayer-query-max-depth",4),l.add("featurelayer-query-pausing-enabled",!1),l.add("hittest-2d-mobile-tolerance",3),l.add("hittest-2d-desktop-tolerance",1),l.add("hittest-2d-small-symbol-tolerance",3),l.add("hittest-2d-small-symbol-tolerance-threshold",3),l.add("featurelayer-advanced-symbols",!1),l.add("featurelayer-pbf",!0),l.add("featurelayer-pbf-statistics",!1),l.add("feature-layers-workers",!0),l.add("feature-polyline-generalization-factor",1),l.add("mapview-transitions-duration",200),l.add("mapview-srswitch-adjust-rotation-scale-threshold",24e6),l.add("mapserver-pbf-version-support",10.81),l.add("mapservice-popup-identify-max-tolerance",20),l("host-webworker")||l("host-browser")&&(l.add("esri-csp-restrictions",()=>{try{new Function}catch{return!0}return!1}),l.add("esri-image-decode",()=>{if("decode"in new Image){const t=new Image;return t.src='data:image/svg+xml;charset=UTF-8,<svg version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>',void t.decode().then(()=>{l.add("esri-image-decode",!0,!0,!0)}).catch(()=>{l.add("esri-image-decode",!1,!0,!0)})}return!1}),l.add("esri-url-encodes-apostrophe",()=>{const t=window.document.createElement("a");return t.href="?'",t.href.includes("?%27")}))})();let K=class S{constructor(e=1){this._seed=e}set seed(e){this._seed=e??Math.random()*S._m}getInt(){return this._seed=(S._a*this._seed+S._c)%S._m,this._seed}getFloat(){return this.getInt()/(S._m-1)}getIntRange(e,r){return Math.round(this.getFloatRange(e,r))}getFloatRange(e,r){const n=r-e;return e+this.getInt()/S._m*n}};K._m=2147483647,K._a=48271,K._c=0;const Ir=1.5,Qs=1/Ir,to=.5;function eo(t,e){for(let r=t.length-1;r>=0;r--){const n=t[r];if(e(n))return n}}function ro(t,e){return e?t.filter((r,n,s)=>s.findIndex(e.bind(null,r))===n):Array.from(new Set(t))}function Dr(t,e,r){if(t==null&&e==null)return!0;if(t==null||e==null||t.length!==e.length)return!1;if(r){for(let n=0;n<t.length;n++)if(!r(t[n],e[n]))return!1}else for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function no(t,e){let r=t.length!==e.length;r&&(t.length=e.length);for(let n=0;n<e.length;++n)t[n]!==e[n]&&(t[n]=e[n],r=!0);return r}function so(t,e,r){let n,s;return r?(n=e.filter(o=>!t.some(a=>r(a,o))),s=t.filter(o=>!e.some(a=>r(a,o)))):(n=e.filter(o=>!t.includes(o)),s=t.filter(o=>!e.includes(o))),{added:n,removed:s}}function oo(t){return t&&typeof t.length=="number"}function io(t,e){const r=t.length;if(r===0)return[];const n=[];for(let s=0;s<r;s+=e)n.push(t.slice(s,s+e));return n}const Ur=!!Array.prototype.fill;function ao(t,e){if(Ur)return new Array(t).fill(e);const r=new Array(t);for(let n=0;n<t;n++)r[n]=e;return r}function co(t,e){e===void 0&&(e=t,t=0);const r=new Array(e-t);for(let n=t;n<e;n++)r[n-t]=n;return r}function lo(t,e,r){const n=t.length;let s=0,o=n-1;for(;s<o;){const i=s+Math.floor((o-s)/2);e>t[i]?s=i+1:o=i}const a=t[s];return r?e>=t[n-1]?-1:a===e?s:s-1:a===e?s:-1}let Oe=class{constructor(){this.last=0}};const Te=new Oe;function At(t,e,r,n){n=n||Te;const s=Math.max(0,n.last-10);for(let a=s;a<r;++a)if(t[a]===e)return n.last=a,a;const o=Math.min(s,r);for(let a=0;a<o;++a)if(t[a]===e)return n.last=a,a;return-1}function fo(t,e,r,n){const s=r??t.length,o=At(t,e,s,n);if(o!==-1)return t[o]=t[s-1],r==null&&t.pop(),e}const $=new Set;function xr(t,e,r=t.length,n=e.length,s,o){if(n===0||r===0)return r;$.clear();for(let i=0;i<n;++i)$.add(e[i]);s=s||Te;const a=Math.max(0,s.last-10);for(let i=a;i<r;++i)if($.has(t[i])&&(o?.push(t[i]),$.delete(t[i]),t[i]=t[r-1],--r,--i,$.size===0||r===0))return $.clear(),r;for(let i=0;i<a;++i)if($.has(t[i])&&(o?.push(t[i]),$.delete(t[i]),t[i]=t[r-1],--r,--i,$.size===0||r===0))return $.clear(),r;return $.clear(),r}function ho(t,e){let r=0;for(let n=0;n<t.length;++n){const s=t[n];e(s,n)&&(t[r]=s,r++)}t.length=r}function po(t,e,r){const n=t.length;if(e>=n)return t.slice(0);const s=ke(r),o=new Set,a=[];for(;a.length<e;){const i=Math.floor(s()*n);o.has(i)||(o.add(i),a.push(t[i]))}return a}function ke(t){return t?(te.seed=t,()=>te.getFloat()):Math.random}function go(t,e){const r=ke(e);for(let n=t.length-1;n>0;n--){const s=Math.floor(r()*(n+1)),o=t[n];t[n]=t[s],t[s]=o}return t}const te=new K;function Fr(t,e){const r=t.indexOf(e);return r!==-1?(t.splice(r,1),e):null}function yo(t,e){const r=new Map,n=t.length;for(let s=0;s<n;s++){const o=t[s],a=e(o,s,t),i=r.get(a);i?i.push(o):r.set(a,[o])}return r}function mo(t,e){return t!=null}const _o=[];function Se(t){return 32+t.length}function qt(){return 16}function bo(t){if(!t)return 0;let e=je;for(const r in t)if(t.hasOwnProperty(r)){const n=t[r];switch(typeof n){case"string":e+=Se(n);break;case"number":e+=qt();break;case"boolean":e+=4}}return e}function Rr(t){if(!t)return 0;if(Array.isArray(t))return zr(t);let e=je;for(const r in t)t.hasOwnProperty(r)&&(e+=Ee(t[r]));return e}function zr(t){const e=t.length;if(e===0||typeof t[0]=="number")return 32+8*e;let r=Ne;for(let n=0;n<e;n++)r+=Ee(t[n]);return r}function Ee(t){switch(typeof t){case"object":return Rr(t);case"string":return Se(t);case"number":return qt();case"boolean":return 4;default:return 8}}function Lr(t,e){return Ne+t.length*e}const je=32,Ne=16;function $o(t){return t instanceof ArrayBuffer}function Bt(t){return t?.constructor?.name==="Int8Array"}function Ce(t){return t?.constructor?.name==="Uint8Array"}function Me(t){return t?.constructor?.name==="Uint8ClampedArray"}function Gt(t){return t?.constructor?.name==="Int16Array"}function Pe(t){return t?.constructor?.name==="Uint16Array"}function Wt(t){return t?.constructor?.name==="Int32Array"}function Ie(t){return t?.constructor?.name==="Uint32Array"}function lt(t){return t?.constructor?.name==="Float32Array"}function ut(t){return t?.constructor?.name==="Float64Array"}function qr(t){return!("buffer"in t)}function vo(...t){return t.reduce((e,r)=>e+(r?qr(r)?Lr(r,qt()):r.byteLength+Br:0),0)}const Br=145,wo=1024;function Ao(t){return ut(t)||lt(t)||Wt(t)||Gt(t)||Bt(t)}function Oo(t){return ut(t)||lt(t)}function To(t){return ut(t)?179769e303:lt(t)?3402823e32:Ie(t)?4294967295:Pe(t)?65535:Ce(t)||Me(t)?255:Wt(t)?2147483647:Gt(t)?32767:Bt(t)?127:256}function Gr(t,e){let r;if(e)for(r in t)t.hasOwnProperty(r)&&(t[r]===void 0?delete t[r]:t[r]instanceof Object&&Gr(t[r],!0));else for(r in t)t.hasOwnProperty(r)&&t[r]===void 0&&delete t[r];return t}function w(t){if(!t||typeof t!="object"||typeof t=="function")return t;const e=Fe(t);if(e!=null)return e;if(De(t))return t.clone();if(Ue(t))return t.map(w);if(xe(t))return t.clone();const r={};for(const n of Object.getOwnPropertyNames(t))r[n]=w(t[n]);return r}function ee(t){if(!t||typeof t!="object"||typeof t=="function"||"HTMLElement"in globalThis&&t instanceof HTMLElement)return t;const e=Fe(t);if(e!=null)return e;if(Ue(t)){let r=!0;const n=t.map(s=>{const o=ee(s);return s!=null&&o==null&&(r=!1),o});return r?n:null}if(De(t))return t.clone();if(t instanceof File||t instanceof Blob)return t;if(!xe(t)){const r=new(Object.getPrototypeOf(t)).constructor;for(const n of Object.getOwnPropertyNames(t)){const s=t[n],o=ee(s);if(s!=null&&o==null)return null;r[n]=o}return r}return null}function De(t){return typeof t.clone=="function"}function Ue(t){return typeof t.map=="function"&&typeof t.forEach=="function"}function xe(t){return typeof t.notifyChange=="function"&&typeof t.watch=="function"}function re(t){if(Object.prototype.toString.call(t)!=="[object Object]")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function Fe(t){if(Bt(t)||Ce(t)||Me(t)||Gt(t)||Pe(t)||Wt(t)||Ie(t)||lt(t)||ut(t))return t.slice();if(t instanceof Date)return new Date(t.getTime());if(t instanceof ArrayBuffer)return t.slice(0,t.byteLength);if(t instanceof Map){const e=new Map;for(const[r,n]of t)e.set(r,w(n));return e}if(t instanceof Set){const e=new Set;for(const r of t)e.add(w(r));return e}return null}function Vt(t,e){return t===e||typeof t=="number"&&isNaN(t)&&typeof e=="number"&&isNaN(e)||typeof t?.getTime=="function"&&typeof e?.getTime=="function"&&t.getTime()===e.getTime()||!1}function Wr(t,e){return t===e||(t==null||typeof t=="string"?t===e:typeof t=="number"?t===e||typeof e=="number"&&isNaN(t)&&isNaN(e):t instanceof Date?e instanceof Date&&t.getTime()===e.getTime():Array.isArray(t)?Array.isArray(e)&&Dr(t,e):t instanceof Set?e instanceof Set&&Hr(t,e):t instanceof Map?e instanceof Map&&Kr(t,e):!!re(t)&&re(e)&&Vr(t,e))}function Vr(t,e){if(t===null||e===null)return!1;const r=Object.keys(t);if(e===null||Object.keys(e).length!==r.length)return!1;for(const n of r)if(t[n]!==e[n]||!Object.prototype.hasOwnProperty.call(e,n))return!1;return!0}function Hr(t,e){if(t.size!==e.size)return!1;for(const r of t)if(!e.has(r))return!1;return!0}function Kr(t,e){if(t.size!==e.size)return!1;for(const[r,n]of t){const s=e.get(r);if(s!==n||s===void 0&&!e.has(r))return!1}return!0}function Jr(t,e,r=!1){return Le(t,e,r)}function Re(t,e){if(e!=null)return e[t]||ze(t.split("."),!1,e)}function ft(t,e,r){const n=t.split("."),s=n.pop(),o=ze(n,!0,r);o&&s&&(o[s]=e)}function ze(t,e,r){let n=r;for(const s of t){if(n==null)return;if(!(s in n)){if(!e)return;n[s]={}}n=n[s]}return n}function Le(t,e,r){return e?Object.keys(e).reduce((n,s)=>{let o=n[s],a=e[s];return o===a?n:o===void 0?(n[s]=w(a),n):(Array.isArray(a)||Array.isArray(n)?(o=o?Array.isArray(o)?n[s]=o.concat():n[s]=[o]:n[s]=[],a&&(Array.isArray(a)||(a=[a]),r?a.forEach(i=>{o.includes(i)||o.push(i)}):n[s]=a.concat())):a&&typeof a=="object"?n[s]=Le(o,a,r):n.hasOwnProperty(s)&&!e.hasOwnProperty(s)||(n[s]=a),n)},t||{}):t}const O={apiKey:void 0,applicationName:"",applicationUrl:globalThis.location?.href,assetsPath:"",fontsUrl:"https://static.arcgis.com/fonts",geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",userPrivilegesApplied:!0,portalUrl:"https://www.arcgis.com",routeServiceUrl:"https://route-api.arcgis.com/arcgis/rest/services/World/Route/NAServer/Route_World",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{crossOriginNoCorsDomains:null,httpsDomains:["arcgis.com","arcgisonline.com","esrikr.com","premiumservices.blackbridge.com","esripremium.accuweather.com","gbm.digitalglobe.com","firstlook.digitalglobe.com","msi.digitalglobe.com"],interceptors:[],maxUrlLength:2e3,priority:"high",proxyRules:[],proxyUrl:null,timeout:6e4,trustedServers:[],useIdentity:!0},log:{interceptors:[],level:null}};if(globalThis.esriConfig&&(Jr(O,globalThis.esriConfig,!0),delete O.has),!O.assetsPath){{const t="4.29";O.assetsPath=`https://js.arcgis.com/${t}/@arcgis/core/assets`}O.defaultAssetsPath=O.assetsPath}const Yr=/\{([^\}]+)\}/g;function ne(t){return t??""}function ko(t,e){return e?t.replaceAll(Yr,typeof e=="object"?(r,n)=>ne(Re(n,e)):(r,n)=>ne(e(n))):t}function So(t,e){return t.replaceAll(/([\.$?*|{}\(\)\[\]\\\/\+\-^])/g,r=>e&&e.includes(r)?r:`\\${r}`)}function Zr(t){let e=0;for(let r=0;r<t.length;r++)e=(e<<5)-e+t.charCodeAt(r),e|=0;return e}function Eo(t){return new DOMParser().parseFromString(t||"","text/html").body.innerText||""}function jo(t,e){return new RegExp(`{${e}}`,"ig").test(t)}const se={info:0,warn:1,error:2,none:3};let b=class y{constructor(e){this.level=null,this._module="",this._parent=null,this.writer=null,this._loggedMessages={error:new Map,warn:new Map,info:new Map},e.level!=null&&(this.level=e.level),e.writer!=null&&(this.writer=e.writer),this._module=e.module,y._loggers.set(this.module,this);const r=this.module.lastIndexOf(".");r!==-1&&(this._parent=y.getLogger(this.module.slice(0,r)))}get module(){return this._module}get parent(){return this._parent}error(...e){this._log("error","always",...e)}warn(...e){this._log("warn","always",...e)}info(...e){this._log("info","always",...e)}errorOnce(...e){this._log("error","once",...e)}warnOnce(...e){this._log("warn","once",...e)}infoOnce(...e){this._log("info","once",...e)}errorOncePerTick(...e){this._log("error","oncePerTick",...e)}warnOncePerTick(...e){this._log("warn","oncePerTick",...e)}infoOncePerTick(...e){this._log("info","oncePerTick",...e)}get test(){const e=this;return{loggedMessages:e._loggedMessages,clearLoggedWarnings:()=>e._loggedMessages.warn.clear()}}static get test(){return{resetLoggers(e=new Map){const r=y._loggers;return y._loggers=e,r},set throttlingDisabled(e){y._throttlingDisabled=e}}}static getLogger(e){return e=typeof e!="string"?e.declaredClass:e,y._loggers.get(e)||new y({module:e})}_log(e,r,...n){if(this._matchLevel(e)){if(r!=="always"&&!y._throttlingDisabled){const s=this._argsToKey(n),o=this._loggedMessages[e].get(s);if(r==="once"&&o!=null||r==="oncePerTick"&&o&&o>=y._tickCounter)return;this._loggedMessages[e].set(s,y._tickCounter),y._scheduleTickCounterIncrement()}for(const s of O.log.interceptors)if(s(e,this.module,...n))return;this._inheritedWriter()(e,this.module,...n)}}_parentWithMember(e,r){let n=this;for(;n!=null;){const s=n[e];if(s!=null)return s;n=n.parent}return r}_inheritedWriter(){return this._parentWithMember("writer",this._consoleWriter)}_consoleWriter(e,r,...n){console[e](`[${r}]`,...n)}_matchLevel(e){const r=O.log.level||"warn";return se[this._parentWithMember("level",r)]<=se[e]}_argsToKey(...e){return Zr(JSON.stringify(e,(n,s)=>typeof s!="object"||Array.isArray(s)?s:"[Object]"))}static _scheduleTickCounterIncrement(){y._tickCounterScheduled||(y._tickCounterScheduled=!0,Promise.resolve().then(()=>{y._tickCounter++,y._tickCounterScheduled=!1}))}};b._loggers=new Map,b._tickCounter=0,b._tickCounterScheduled=!1,b._throttlingDisabled=!1;function No(t,e){for(const[r,n]of t)if(e(n,r))return!0;return!1}function Co(t,e){for(const[r,n]of t)if(e(n,r))return n;return null}function Xr(t,e,r){const n=t.get(e);if(n!==void 0)return n;const s=r();return t.set(e,s),s}function Mo(t){const e=new Map;return r=>(e.has(r)||e.set(r,t(r)),e.get(r))}const M=()=>b.getLogger("esri.core.accessorSupport.ensureTypes");function Qr(t){return t==null?t:new Date(t)}function tn(t){return t==null?t:!!t}function en(t){return t==null?t:t.toString()}function rn(t){return t==null?t:(t=parseFloat(t),isNaN(t)?0:t)}function nn(t){return t==null?t:Math.round(parseFloat(t))}function qe(t){return t?.constructor&&t.constructor.__accessorMetadata__!==void 0}function X(t,e){return e!=null&&t&&!(e instanceof t)}function Be(t){return t&&"isCollection"in t}function oe(t){return t?.Type?typeof t.Type=="function"?t.Type:t.Type.base:null}function sn(t,e){if(!e?.constructor||!Be(e.constructor))return Ot(t,e)?e:new t(e);const r=oe(t.prototype.itemType),n=oe(e.constructor.prototype.itemType);return r?n?r===n?e:r.prototype.isPrototypeOf(n.prototype)?new t(e):(Ot(t,e),e):new t(e):e}function Ot(t,e){return!!qe(e)&&(M().error("Accessor#set","Assigning an instance of '"+(e.declaredClass||"unknown")+"' which is not a subclass of '"+ht(t)+"'"),!0)}function on(t,e){return e==null?e:Be(t)?sn(t,e):X(t,e)?Ot(t,e)?e:new t(e):e}function ht(t){return t?.prototype?.declaredClass||"unknown"}const an=new WeakMap;function cn(t){switch(t){case Number:return rn;case Ht:return nn;case Boolean:return tn;case String:return en;case Date:return Qr;default:return Xr(an,t,()=>on.bind(null,t))}}function j(t,e){const r=cn(t);return arguments.length===1?r:r(e)}function R(t,e,r){return arguments.length===1?R.bind(null,t):e&&(Array.isArray(e)?e.map(n=>t(n,r)):[t(e,r)])}function ln(t,e){return arguments.length===1?R(r=>j(t,r)):R(r=>j(t,r),e)}function Ge(t,e,r){return e!==0&&Array.isArray(r)?r.map(n=>Ge(t,e-1,n)):t(r)}function Q(t,e,r){if(arguments.length===2)return o=>Q(t,e,o);if(!r)return r;r=Ge(t,e,r);let n=e,s=r;for(;n>0&&Array.isArray(s);)n--,s=s[0];if(s!==void 0)for(let o=0;o<n;o++)r=[r];return r}function un(t,e,r){return arguments.length===2?Q(n=>j(t,n),e):Q(n=>j(t,n),e,r)}function We(t){return!!Array.isArray(t)&&!t.some(e=>{const r=typeof e;return!(r==="string"||r==="number"||r==="function"&&t.length>1)})}function Tt(t,e){if(arguments.length===2)return Tt(t).call(null,e);const r=new Set,n=t.filter(i=>typeof i!="function"),s=t.filter(i=>typeof i=="function");for(const i of t)typeof i!="string"&&typeof i!="number"||r.add(i);let o=null,a=null;return(i,c)=>{if(i==null)return i;const u=typeof i,f=u==="string"||u==="number";return f&&(r.has(i)||s.some(h=>u==="string"&&h===String||u==="number"&&h===Number))||u==="object"&&s.some(h=>!X(i,h))?i:(f&&n.length?(o||(o=n.map(h=>typeof h=="string"?`'${h}'`:`${h}`).join(", ")),M().error("Accessor#set",`'${i}' is not a valid value for this property, only the following values are valid: ${o}`)):typeof i=="object"&&s.length?(a||(a=s.map(h=>ht(h)).join(", ")),M().error("Accessor#set",`'${i}' is not a valid value for this property, value must be one of ${a}`)):M().error("Accessor#set",`'${i}' is not a valid value for this property`),c&&(c.valid=!1),null)}}function kt(t,e){if(arguments.length===2)return kt(t).call(null,e);const r={},n=[],s=[];for(const c in t.typeMap){const u=t.typeMap[c];r[c]=j(u),n.push(ht(u)),s.push(c)}const o=()=>`'${n.join("', '")}'`,a=()=>`'${s.join("', '")}'`,i=typeof t.key=="string"?c=>c[t.key]:t.key;return c=>{if(t.base&&!X(t.base,c)||c==null)return c;const u=i(c)||t.defaultKeyValue,f=r[u];if(!f)return M().error("Accessor#set",`Invalid property value, value needs to be one of ${o()}, or a plain object that can autocast (having .type = ${a()})`),null;if(!X(t.typeMap[u],c))return c;if(typeof t.key=="string"&&!qe(c)){const h={};for(const p in c)p!==t.key&&(h[p]=c[p]);return f(h)}return f(c)}}let Ht=class{};const Io={native:t=>({type:"native",value:t}),array:t=>({type:"array",value:t}),oneOf:t=>({type:"one-of",values:t})};function fn(t){if(!t||!("type"in t))return!1;switch(t.type){case"native":case"array":case"one-of":return!0}return!1}function Ve(t){switch(t.type){case"native":return j(t.value);case"array":return R(Ve(t.value));case"one-of":return hn(t);default:return null}}function hn(t){let e=null;return(r,n)=>Et(r,t)?r:(e==null&&(e=St(t)),M().error("Accessor#set",`Invalid property value, value needs to be of type ${e}`),n&&(n.valid=!1),null)}function St(t){switch(t.type){case"native":switch(t.value){case Number:return"number";case String:return"string";case Boolean:return"boolean";case Ht:return"integer";case Date:return"date";default:return ht(t.value)}case"array":return`array of ${St(t.value)}`;case"one-of":{const e=t.values.map(r=>St(r));return`one of ${e.slice(0,-1)} or ${e[e.length-1]}`}}return"unknown"}function Et(t,e){if(t==null)return!0;switch(e.type){case"native":switch(e.value){case Number:case Ht:return typeof t=="number";case Boolean:return typeof t=="boolean";case String:return typeof t=="string"}return t instanceof e.value;case"array":return!!Array.isArray(t)&&!t.some(r=>!Et(r,e.value));case"one-of":return e.values.some(r=>Et(t,r))}}const dn={remove:()=>{}};function _(t){return t?{remove(){t&&(t(),t=void 0)}}:dn}function pn(t){t.forEach(e=>e?.remove())}function gn(t){return _(()=>pn(t))}function Do(t){return _(()=>t()?.remove())}function Uo(t){return _(t!=null?()=>t.destroy():void 0)}function He(t){return t.__accessor__??null}function yn(t,e){return t?.metadata?.[e]!=null}function mn(t,e,r){return r?tt(t,e,{policy:r,path:""}):tt(t,e,null)}function tt(t,e,r){return e?Object.keys(e).reduce((n,s)=>{const o=s;let a=null,i="merge";if(r&&(a=r.path?`${r.path}.${s}`:s,i=r.policy(a)),i==="replace"||i==="replace-arrays"&&Array.isArray(n[o]))return n[o]=e[o],n;if(n[o]===void 0)return n[o]=w(e[o]),n;let c=n[o],u=e[o];if(c===u)return n;if(Array.isArray(u)||Array.isArray(n))c=c?Array.isArray(c)?n[o]=c.concat():n[o]=[c]:n[o]=[],u&&(Array.isArray(u)||(u=[u]),u.forEach(f=>{c.includes(f)||c.push(f)}));else if(u&&typeof u=="object")if(r){const f=r.path;r.path=a,n[o]=tt(c,u,r),r.path=f}else n[o]=tt(c,u,null);else n.hasOwnProperty(s)&&!e.hasOwnProperty(s)||(n[o]=u);return n},t||{}):t}function Ke(t){return Array.isArray(t)?t:t.split(".")}function ie(t){return t.includes(",")?t.split(",").map(e=>e.trim()):[t.trim()]}function _n(t){if(Array.isArray(t)){const e=[];for(const r of t)e.push(...ie(r));return e}return ie(t)}function Je(t,e,r,n){const s=_n(e);if(s.length!==1){const o=s.map(a=>n(t,a,r));return gn(o)}return n(t,s[0],r)}function Ye(t,e){const r=t[t.length-1]==="?"?t.slice(0,-1):t;if(e.getItemAt!=null||Array.isArray(e)){const s=parseInt(r,10);if(!isNaN(s))return Array.isArray(e)?e[s]:e.at(s)}const n=He(e);return yn(n,r)?n.get(r):e[r]}function Ze(t,e,r){if(t==null)return t;const n=Ye(e[r],t);return!n&&r<e.length-1?void 0:r===e.length-1?n:Ze(n,e,r+1)}function dt(t,e,r=0){return typeof e!="string"||e.includes(".")?Ze(t,Ke(e),r):Ye(e,t)}function z(t,e){return dt(t,e)}function xo(t,e){return dt(e,t)!==void 0}function B(t){let e=t.constructor.__accessorMetadata__;const r=Object.prototype.hasOwnProperty.call(t.constructor,"__accessorMetadata__");if(e){if(!r){e=Object.create(e);for(const n in e)e[n]=w(e[n]);Object.defineProperty(t.constructor,"__accessorMetadata__",{value:e,enumerable:!1,configurable:!0,writable:!0})}}else e={},Object.defineProperty(t.constructor,"__accessorMetadata__",{value:e,enumerable:!1,configurable:!0,writable:!0});return t.constructor.__accessorMetadata__}function Xe(t,e){const r=B(t);let n=r[e];return n||(n=r[e]={}),n}function bn(t,e){return mn(t,e,vn)}const $n=/^(?:[^.]+\.)?(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/;function vn(t){return $n.test(t)?"replace":"merge"}function wn(t,e){return t.replaceAll(/\$\{([^\s\:\}]*)(?:\:([^\s\:\}]+))?\}/g,(r,n)=>n===""?"$":(Re(n,e)??"").toString())}let Qe=class{constructor(e,r,n){this.name=e,this.details=n,this.message=(r&&wn(r,n))??""}toString(){return"["+this.name+"]: "+this.message}},G=class tr extends Qe{constructor(e,r,n){super(e,r,n)}toJSON(){if(this.details!=null)try{return{name:this.name,message:this.message,details:JSON.parse(JSON.stringify(this.details,(e,r)=>{if(r&&typeof r=="object"&&typeof r.toJSON=="function")return r;try{return w(r)}catch{return"[object]"}}))}}catch(e){throw b.getLogger("esri.core.Error").error(e),e}return{name:this.name,message:this.message,details:this.details}}static fromJSON(e){return new tr(e.name,e.message,e.details)}};G.prototype.type="error";function et(t,e,r){if(t&&e)if(typeof e=="object")for(const n of Object.getOwnPropertyNames(e))et(t,n,e[n]);else{if(e.includes(".")){const s=e.split("."),o=s.splice(-1,1)[0];return void et(z(t,s),o,r)}const n=t.__accessor__;n!=null&&An(e,n),t[e]=r}}function An(t,e){if(l("esri-unknown-property-errors")&&!On(t,e))throw new G("set:unknown-property",Tn(t,e))}function On(t,e){return e.metadata[t]!=null}function Tn(t,e){return"setting unknown property '"+t+"' on instance of "+e.host.declaredClass}function kn(t={}){return(e,r)=>{if(e===Function.prototype)throw new Error(`Inappropriate use of @property() on a static field: ${e.name}.${r}. Accessor does not support static properties.`);const n=Object.getOwnPropertyDescriptor(e,r),s=Xe(e,r);n&&(n.get||n.set?(s.get=n.get||s.get,s.set=n.set||s.set):"value"in n&&("value"in t&&b.getLogger("esri.core.accessorSupport.decorators.property").warn(`@property() will redefine the value of "${r}" on "${e.constructor.name}" already defined in the metadata`,t),s.value=t.value=n.value)),t.readOnly!=null&&(s.readOnly=t.readOnly);const o=t.aliasOf;if(o){const c=typeof o=="string"?o:o.source,u=typeof o=="string"?null:o.overridable===!0;let f;s.dependsOn=[c],s.get=function(){let h=z(this,c);if(typeof h=="function"){f||(f=c.split(".").slice(0,-1).join("."));const p=z(this,f);p&&(h=h.bind(p))}return h},s.readOnly||(s.set=u?function(h){this._override(r,h)}:function(h){et(this,c,h)})}const a=t.type,i=t.types;s.cast||(a?s.cast=Sn(a):i&&(Array.isArray(i)?s.cast=R(kt(i[0])):s.cast=kt(i))),bn(s,t),t.range&&(s.cast=En(s.cast,t.range))}}function Ro(t,e,r){const n=Xe(t,r);n.json||(n.json={});let s=n.json;return e!==void 0&&(s.origins||(s.origins={}),s.origins[e]||(s.origins[e]={}),s=s.origins[e]),s}function Sn(t){let e=0,r=t;if(fn(t))return Ve(t);for(;Array.isArray(r)&&r.length===1&&typeof r[0]!="string"&&typeof r[0]!="number";)r=r[0],e++;const n=r;if(We(n))return e===0?Tt(n):Q(Tt(n),e);if(e===1)return ln(n);if(e>1)return un(n,e);const s=t;return s.from?s.from:j(s)}function En(t,e){return r=>{let n=+t(r);return e.step!=null&&(n=Math.round(n/e.step)*e.step),e.min!=null&&(n=Math.max(e.min,n)),e.max!=null&&(n=Math.min(e.max,n)),n}}const er=Symbol("Accessor-beforeDestroy");var m;(function(t){t[t.INITIALIZING=0]="INITIALIZING",t[t.CONSTRUCTING=1]="CONSTRUCTING",t[t.CONSTRUCTED=2]="CONSTRUCTED",t[t.DESTROYED=3]="DESTROYED"})(m||(m={}));var d;(function(t){t[t.Dirty=1]="Dirty",t[t.Overridden=2]="Overridden",t[t.Computing=4]="Computing",t[t.NonNullable=8]="NonNullable",t[t.HasDefaultValue=16]="HasDefaultValue",t[t.DepTrackingInitialized=32]="DepTrackingInitialized",t[t.AutoTracked=64]="AutoTracked",t[t.ExplicitlyTracking=128]="ExplicitlyTracking"})(d||(d={}));const rt={onObservableAccessed:()=>{},onTrackingEnd:()=>{}},U=[];let x=rt;function pt(t){x.onObservableAccessed(t)}let J=!1,Y=!1;function k(t,e,r){if(J)return Kt(t,e,r);rr(t);const n=e.call(r);return nr(),n}function jn(t,e){return k(rt,t,e)}function Kt(t,e,r){const n=J;J=!0,rr(t);let s=null;try{s=e.call(r)}catch(o){Y&&b.getLogger("esri.core.accessorSupport.tracking").error(o)}return nr(),J=n,s}function rr(t){x=t,U.push(t)}function nr(){const t=U.length;if(t>1){const e=U.pop();x=U[t-2],e.onTrackingEnd()}else if(t===1){const e=U.pop();x=rt,e.onTrackingEnd()}else x=rt}function sr(t,e){if(e.flags&d.DepTrackingInitialized)return;const r=Y;Y=!1,e.flags&d.AutoTracked?Kt(e,e.metadata.get,t):or(t,e),Y=r}const Nn=[];function or(t,e){e.flags&d.ExplicitlyTracking||(e.flags|=d.ExplicitlyTracking,Kt(e,()=>{const r=e.metadata.dependsOn||Nn;for(const n of r)if(typeof n!="string"||n.includes(".")){const s=Ke(n);for(let o=0,a=t;o<s.length&&a!=null&&typeof a=="object";++o)a=ae(a,s[o],o!==s.length-1)}else ae(t,n,!1)}),e.flags&=~d.ExplicitlyTracking)}function ae(t,e,r){const n=e[e.length-1]==="?"?e.slice(0,-1):e;if(t.getItemAt!=null||Array.isArray(t)){const o=parseInt(n,10);if(!isNaN(o))return Array.isArray(t)?t[o]:t.at(o)}const s=He(t);if(s){const o=s.propertiesByName.get(n);o&&(pt(o),sr(t,o))}return r?t[n]:void 0}function Cn(t){if(t.json&&t.json.origins){const e=t.json.origins,r={"web-document":["web-scene","web-map"]};for(const n in r)if(e[n]){const s=e[n];r[n].forEach(o=>{e[o]=s}),delete e[n]}}}let ir=class extends Qe{constructor(e,r,n){super(e,r,n)}};ir.prototype.type="warning";function ar(t){return!!t&&t.prototype?.declaredClass&&t.prototype.declaredClass.indexOf("esri.core.Collection")===0}const jt=()=>b.getLogger("esri.core.accessorSupport.extensions.serializableProperty.reader");function ce(t,e,r){t&&(!r&&!e.read||e.read?.reader||e.read?.enabled===!1||Dn(t)&&ft("read.reader",Mn(t),e))}function Mn(t){const e=t.ndimArray??0;if(e>1)return In(t);if(e===1)return le(t);if("type"in t&&lr(t.type)){const r=t.type.prototype?.itemType?.Type,n=le(typeof r=="function"?{type:r}:{types:r});return(s,o,a)=>{const i=n(s,o,a);return i&&new t.type(i)}}return Jt(t)}function Jt(t){return"type"in t?Pn(t.type):Un(t.types)}function Pn(t){return t.prototype.read?(e,r,n)=>{if(e==null)return e;const s=typeof e;if(s!=="object")return void jt().error(`Expected JSON value of type 'object' to deserialize type '${t.prototype.declaredClass}', but got '${s}'`);const o=new t;return o.read(e,n),o}:t.fromJSON}function cr(t,e,r,n){return n!==0&&Array.isArray(e)?e.map(s=>cr(t,s,r,n-1)):t(e,void 0,r)}function In(t){const e=Jt(t),r=cr.bind(null,e),n=t.ndimArray??0;return(s,o,a)=>{if(s==null)return s;s=r(s,a,n);let i=n,c=s;for(;i>0&&Array.isArray(c);)i--,c=c[0];if(c!==void 0)for(let u=0;u<i;u++)s=[s];return s}}function le(t){const e=Jt(t);return(r,n,s)=>{if(r==null)return r;if(Array.isArray(r)){const a=[];for(const i of r){const c=e(i,void 0,s);c!==void 0&&a.push(c)}return a}const o=e(r,void 0,s);return o!==void 0?[o]:void 0}}function lr(t){if(!ar(t))return!1;const e=t.prototype.itemType;return!(!e||!e.Type)&&(typeof e.Type=="function"?Yt(e.Type):ur(e.Type))}function Dn(t){return"types"in t?ur(t.types):Yt(t.type)}function Yt(t){return!Array.isArray(t)&&!!t&&t.prototype&&("read"in t.prototype||"fromJSON"in t||lr(t))}function ur(t){for(const e in t.typeMap)if(!Yt(t.typeMap[e]))return!1;return!0}function Un(t){let e=null;const r=t.errorContext??"type",n=t.validate;return(s,o,a)=>{if(s==null)return s;const i=typeof s;if(i!=="object")return void jt().error(`Expected JSON value of type 'object' to deserialize, but got '${i}'`);e||(e=xn(t));const c=t.key;if(typeof c!="string")return;const u=s[c],f=u?e[u]:t.defaultKeyValue?t.typeMap[t.defaultKeyValue]:void 0;if(!f){const p=`Type '${u||"unknown"}' is not supported`;return a?.messages&&s&&a.messages.push(new ir(`${r}:unsupported`,p,{definition:s,context:a})),void jt().error(p)}const h=new f;return h.read(s,a),n?n(h):h}}function xn(t){const e={};for(const r in t.typeMap){const n=t.typeMap[r],s=B(n.prototype);if(typeof t.key=="function")continue;const o=s[t.key];if(!o)continue;o.json?.type&&Array.isArray(o.json.type)&&o.json.type.length===1&&typeof o.json.type[0]=="string"&&(e[o.json.type[0]]=n);const a=o.json?.write;if(!a?.writer){e[r]=n;continue}const i=a.target,c=typeof i=="string"?i:t.key,u={};a.writer(r,u,c),u[c]&&(e[u[c]]=n)}return e}function Fn(t){if(t.json||(t.json={}),fe(t.json),he(t.json),ue(t.json),t.json.origins)for(const e in t.json.origins)fe(t.json.origins[e]),he(t.json.origins[e]),ue(t.json.origins[e]);return!0}function ue(t){t.name&&(t.read&&typeof t.read=="object"?t.read.source===void 0&&(t.read.source=t.name):t.read={source:t.name},t.write&&typeof t.write=="object"?t.write.target===void 0&&(t.write.target=t.name):t.write={target:t.name})}function fe(t){typeof t.read=="boolean"?t.read={enabled:t.read}:typeof t.read=="function"?t.read={enabled:!0,reader:t.read}:t.read&&typeof t.read=="object"&&t.read.enabled===void 0&&(t.read.enabled=!0)}function he(t){typeof t.write=="boolean"?t.write={enabled:t.write}:typeof t.write=="function"?t.write={enabled:!0,writer:t.write}:t.write&&typeof t.write=="object"&&t.write.enabled===void 0&&(t.write.enabled=!0)}function de(t,e){if(!e.write||e.write.writer||e.write.enabled===!1&&!e.write.overridePolicy)return;const r=t?.ndimArray??0;t&&(r===1||"type"in t&&ar(t.type))?e.write.writer=qn:r>1?e.write.writer=Bn(r):e.types?Array.isArray(e.types)?e.write.writer=zn(e.types[0]):e.write.writer=Rn(e.types):e.write.writer=L}function Rn(t){return(e,r,n,s)=>e?fr(e,t,s)?L(e,r,n,s):void 0:L(e,r,n,s)}function fr(t,e,r){for(const n in e.typeMap)if(t instanceof e.typeMap[n])return!0;if(r?.messages){const n=e.errorContext??"type",s=`Values of type '${(typeof e.key!="function"?t[e.key]:t.declaredClass)??"Unknown"}' cannot be written`;r&&r.messages&&t&&r.messages.push(new G(`${n}:unsupported`,s,{definition:t,context:r})),b.getLogger("esri.core.accessorSupport.extensions.serializableProperty.writer").error(s)}return!1}function zn(t){return(e,r,n,s)=>!e||!Array.isArray(e)?L(e,r,n,s):L(e.filter(o=>fr(o,t,s)),r,n,s)}function L(t,e,r,n){ft(r,nt(t,n),e)}function nt(t,e){return t&&typeof t.write=="function"?t.write({},e):t&&typeof t.toJSON=="function"?t.toJSON():typeof t=="number"?Ln(t):t}function Ln(t){return t===-1/0?-Number.MAX_VALUE:t===1/0?Number.MAX_VALUE:isNaN(t)?null:t}function qn(t,e,r,n){let s;t===null?s=null:t&&typeof t.map=="function"?(s=t.map(o=>nt(o,n)),typeof s.toArray=="function"&&(s=s.toArray())):s=[nt(t,n)],ft(r,s,e)}function hr(t,e,r){return r!==0&&Array.isArray(t)?t.map(n=>hr(n,e,r-1)):nt(t,e)}function Bn(t){return(e,r,n,s)=>{let o;if(e===null)o=null;else{o=hr(e,s,t);let a=t,i=o;for(;a>0&&Array.isArray(i);)a--,i=i[0];if(i!==void 0)for(let c=0;c<a;c++)o=[o]}ft(n,o,r)}}function Lo(t,e){return Zt(t,"any",e?.origin)}function qo(t,e){return Zt(t,"read",e?.origin)}function Bo(t,e){return Zt(t,"write",e?.origin)}function Zt(t,e,r){let n=t?.json;if(n?.origins&&r){let s;s=r==="link-chart"?n.origins[r]&&(e==="any"||e in n.origins[r])?n.origins[r]:n.origins["web-map"]:n.origins[r],s&&(e==="any"||e in s)&&(n=s)}return n}function Gn(t){const e=Wn(t);if(t.json.origins)for(const r in t.json.origins){const n=t.json.origins[r],s=n.types?Vn(n):e;ce(s,n,!1),n.types&&!n.write&&t.json.write&&t.json.write.enabled&&(n.write={...t.json.write}),de(s,n)}ce(e,t.json,!0),de(e,t.json)}function Wn(t){return t.json.types?Nt(t.json):t.type?dr(t):Nt(t)}function Vn(t){return t.type?dr(t):Nt(t)}function dr(t){if(!t.type)return;let e=0,r=t.type;for(;Array.isArray(r)&&!We(r);)r=r[0],e++;return{type:r,ndimArray:e}}function Nt(t){if(!t.types)return;let e=0,r=t.types;for(;Array.isArray(r);)r=r[0],e++;return{types:r,ndimArray:e}}function Hn(t){Fn(t)&&(Cn(t),Gn(t))}const _t=new Set,bt=new Set;function Kn(t){return e=>{t??="esri.core.Accessor",e.prototype.declaredClass=t,Yn(e);const r=[],n=[];let s=e.prototype;for(;s;)s.hasOwnProperty("initialize")&&!_t.has(s.initialize)&&(_t.add(s.initialize),r.push(s.initialize)),s.hasOwnProperty("destroy")&&!bt.has(s.destroy)&&(bt.add(s.destroy),n.push(s.destroy)),s=Object.getPrototypeOf(s);_t.clear(),bt.clear();const o=class extends e{constructor(...i){if(super(...i),this.constructor===o&&typeof this.postscript=="function"){if(r.length&&Object.defineProperty(this,"initialize",{enumerable:!1,configurable:!0,value(){for(let c=r.length-1;c>=0;c--)r[c].call(this)}}),n.length){let c=!1;const u=this[er];Object.defineProperty(this,"destroy",{enumerable:!1,configurable:!0,value(){if(!c){c=!0,u.call(this);for(let f=0;f<n.length;f++)n[f].call(this)}}})}Object.defineProperty(this,Symbol.dispose,{enumerable:!1,configurable:!0,value(){this.destroy()}}),this.postscript(...i)}}};o.__accessorMetadata__=B(e.prototype),o.prototype.declaredClass=t;const a=(t||"AccessorSubclass").split(".").slice(-1)[0];return Object.defineProperty(o,"name",{value:a,configurable:!0}),o}}function Jn(t,e){return e.get==null?function(){const r=this.__accessor__,n=r.propertiesByName.get(t);if(n===void 0)return;pt(n);const s=r.store;return s.has(t)?s.get(t):n.metadata.value}:function(){const r=this.__accessor__,n=r.propertiesByName.get(t);if(n!==void 0)return n.getComputed(r)}}function Yn(t){const e=t.prototype,r=B(e),n={};for(const s of Object.getOwnPropertyNames(r)){const o=r[s];Hn(o),n[s]={enumerable:!0,configurable:!0,get:Jn(s,o),set(a){const i=this.__accessor__;if(i!==void 0){if(!Object.isFrozen(this)){if(i.initialized&&o.readOnly)throw new TypeError(`[accessor] cannot assign to read-only property '${s}' of ${this.declaredClass}`);if(i.lifecycle===m.CONSTRUCTED&&o.constructOnly)throw new TypeError(`[accessor] cannot assign to construct-only property '${s}' of ${this.declaredClass}`);i.set(s,a)}}else Object.defineProperty(this,s,{enumerable:!0,configurable:!0,writable:!0,value:a})}}}Object.defineProperties(t.prototype,n)}const pe=new WeakMap;function Zn(t,e,r=!1){const n=`ðŸ›‘ DEPRECATED - ${e}`;if(!r)return void t.warn(n);let s=pe.get(t);s||(s=new Set,pe.set(t,s)),s.has(e)||(s.add(e),t.warn(n))}function Xn(t,e,r={}){if(l("esri-deprecation-warnings")){const{moduleName:n}=r;pr(t,`Function: ${(n?n+"::":"")+e+"()"}`,r)}}function Go(t,e,r={}){if(l("esri-deprecation-warnings")){const{moduleName:n}=r;pr(t,`Property: ${(n?n+"::":"")+e}`,r)}}function pr(t,e,r={}){if(l("esri-deprecation-warnings")){const{replacement:n,version:s,see:o,warnOnce:a}=r;let i=e;n&&(i+=`
	ðŸ› ï¸ Replacement: ${n}`),s&&(i+=`
	âš™ï¸ Version: ${s}`),o&&(i+=`
	ðŸ”— See ${o} for more details.`),Zn(t,i,a)}}function Wo(t){const e=[];return function*(){yield*e;for(const r of t)e.push(r),yield r}}function Vo(t,e){for(const r of t)if(r!=null&&e(r))return r}function ge(t){return t!=null&&typeof t[Symbol.iterator]=="function"}let Qn=class Ct{constructor(){this._groups=new Map}destroy(){this.removeAll()}get size(){let e=0;return this._groups.forEach(r=>{e+=r.length}),e}add(e,r){if(ge(e)){const n=this._getOrCreateGroup(r);for(const s of e)this._isHandle(s)&&n.push(s)}else this._isHandle(e)&&this._getOrCreateGroup(r).push(e);return this}forEach(e,r){if(typeof e=="function")this._groups.forEach(n=>n.forEach(e));else{const n=this._getGroup(e);n&&r&&n.forEach(r)}}has(e){return this._groups.has(this._ensureGroupKey(e))}remove(e){if(typeof e!="string"&&ge(e)){for(const r of e)this.remove(r);return this}return this.has(e)?(this._removeAllFromGroup(this._getGroup(e)),this._groups.delete(this._ensureGroupKey(e)),this):this}removeAll(){return this._groups.forEach(e=>this._removeAllFromGroup(e)),this._groups.clear(),this}_isHandle(e){return e&&(!!e.remove||e instanceof Ct)}_getOrCreateGroup(e){if(this.has(e))return this._getGroup(e);const r=[];return this._groups.set(this._ensureGroupKey(e),r),r}_getGroup(e){return this._groups.get(this._ensureGroupKey(e))}_ensureGroupKey(e){return e||"_default_"}_removeAllFromGroup(e){for(const r of e)r instanceof Ct?r.removeAll():r.remove()}};function Ho(t,e){if(t==null)throw new Error(e??"value is None")}function ts(t){return t?.destroy(),null}function Ko(t){return t?.dispose(),null}function es(t){return t?.remove(),null}function Jo(t){return t?.abort(),null}function Yo(t){return t?.release(),null}function Zo(t,e,r){return t!=null&&e!=null?r!=null?r(t,e):t.equals(e):t===e}function Xo(t,e){return t?.[e]}function Qo(t,e){let r;return t.some((n,s)=>(r=e(n,s),r!=null)),r??void 0}function rs(t){return t?.release&&typeof t.release=="function"}function ns(t){return t?.acquire&&typeof t.acquire=="function"}let gt=class Mt{constructor(e,r,n,s=1,o=0){if(this._ctor=e,this._acquireFunction=r,this._releaseFunction=n,this.allocationSize=s,this._pool=new Array(o),this._initialSize=o,this._ctor)for(let a=0;a<o;a++)this._pool[a]=new this._ctor;this.allocationSize=Math.max(s,1)}destroy(){this.prune(0)}acquire(...e){let r;if(Mt.test.disabled)r=new this._ctor;else{if(this._pool.length===0){const n=this.allocationSize;for(let s=0;s<n;s++)this._pool[s]=new this._ctor}r=this._pool.pop()}return this._acquireFunction?this._acquireFunction(r,...e):ns(r)&&r.acquire(...e),r}release(e){e&&!Mt.test.disabled&&(this._releaseFunction?this._releaseFunction(e):rs(e)&&e.release(),this._pool.push(e))}prune(e=this._initialSize){if(!(e>=this._pool.length)){for(let r=e;r<this._pool.length;++r){const n=this._pool[r];this._dispose(n)}this._pool.length=e}}_dispose(e){e.dispose&&typeof e.dispose=="function"&&e.dispose()}};gt.test={disabled:!1};let ss=class{constructor(e,r){this._observers=e,this._observer=r}remove(){Fr(this._observers,this._observer)}},os=class{constructor(){this._observers=null,this.destroyed=!1}observe(e){if(this.destroyed||e.destroyed)return is;this._observers==null&&(this._observers=[]);const r=this._observers;let n=!1,s=!1;const o=r.length;for(let a=0;a<o;++a){const i=r[a];if(i.destroyed)s=!0;else if(i===e){n=!0;break}}return n||(r.push(e),s&&this._removeDestroyedObservers()),new ss(r,e)}_removeDestroyedObservers(){const e=this._observers;if(!e||e.length===0)return;const r=e.length;let n=0;for(let s=0;s<r;++s){for(;s+n<r&&e[s+n].destroyed;)++n;if(n>0){if(!(s+n<r))break;e[s]=e[s+n]}}e.length=r-n}destroy(){if(this.destroyed)return;this.destroyed=!0;const e=this._observers;if(e!=null){for(const r of e)r.onCommitted();this._observers=null}}};const is=_();var g;(function(t){t[t.DEFAULTS=0]="DEFAULTS",t[t.COMPUTED=1]="COMPUTED",t[t.SERVICE=2]="SERVICE",t[t.PORTAL_ITEM=3]="PORTAL_ITEM",t[t.WEB_SCENE=4]="WEB_SCENE",t[t.WEB_MAP=5]="WEB_MAP",t[t.LINK_CHART=6]="LINK_CHART",t[t.USER=7]="USER"})(g||(g={}));const ri=g.USER+1;function as(t){switch(t){case"defaults":return g.DEFAULTS;case"service":return g.SERVICE;case"portal-item":return g.PORTAL_ITEM;case"web-scene":return g.WEB_SCENE;case"web-map":return g.WEB_MAP;case"link-chart":return g.LINK_CHART;case"user":return g.USER;default:return null}}function Pt(t){switch(t){case g.DEFAULTS:return"defaults";case g.SERVICE:return"service";case g.PORTAL_ITEM:return"portal-item";case g.WEB_SCENE:return"web-scene";case g.WEB_MAP:return"web-map";case g.LINK_CHART:return"link-chart";case g.USER:return"user"}}function ni(t){return Pt(t)}let ye=class extends os{constructor(e,r){super(),this.propertyName=e,this.metadata=r,this._accessed=null,this._handles=null,this.flags=0,this.flags=d.Dirty|(r.nonNullable?d.NonNullable:0)|(r.hasOwnProperty("value")?d.HasDefaultValue:0)|(r.get===void 0?d.DepTrackingInitialized:0)|(r.dependsOn===void 0?d.AutoTracked:0)}destroy(){this.flags&d.Dirty&&this.onCommitted(),super.destroy(),this._accessed=null,this._clearObservationHandles()}getComputed(e){pt(this);const r=e.store,n=this.propertyName,s=this.flags,o=r.get(n);if(s&d.Computing||~s&d.Dirty&&r.has(n))return o;this.flags|=d.Computing;const a=e.host;let i;s&d.AutoTracked?i=k(this,this.metadata.get,a):(or(a,this),i=this.metadata.get.call(a)),r.set(n,i,g.COMPUTED);const c=r.get(n);return c===o?this.flags&=~d.Dirty:jn(this.commit,this),this.flags&=~d.Computing,c}onObservableAccessed(e){if(e===this)return;let r=this._accessed;if(r==null)r=[],this._accessed=r;else if(r.includes(e))return;r.push(e)}onTrackingEnd(){this._clearObservationHandles(),this.flags|=d.DepTrackingInitialized;const e=this._accessed;if(e==null||e.length===0)return;let r=this._handles;r==null&&(r=[],this._handles=r);for(let n=0;n<e.length;++n)r.push(e[n].observe(this));e.length=0}notifyChange(){this.onInvalidated(),this.onCommitted()}invalidate(){this.onInvalidated()}commit(){this.flags&=~d.Dirty,this.onCommitted()}_clearObservationHandles(){const e=this._handles;if(e!==null){for(let r=0;r<e.length;++r)e[r].remove();e.length=0}}onInvalidated(){~this.flags&d.Overridden&&(this.flags|=d.Dirty);const e=this._observers;if(e&&e.length>0)for(const r of e)r.onInvalidated()}onCommitted(){const e=this._observers;if(e&&e.length>0){const r=e.slice();for(const n of r)n.onCommitted()}}},cs=class gr{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(e){const r=new gr;return this._values.forEach((n,s)=>{e&&e.has(s)||r.set(s,w(n))}),r}get(e){return this._values.get(e)}originOf(){return g.USER}keys(){return[...this._values.keys()]}set(e,r){this._values.set(e,r)}delete(e){this._values.delete(e)}has(e){return this._values.has(e)}forEach(e){this._values.forEach(e)}};function W(t,e,r){return t!==void 0}function me(t,e,r,n){return t!==void 0&&(!(r==null&&t.flags&d.NonNullable)||(n.lifecycle,m.INITIALIZING,!1))}let ls=class{constructor(e){this.host=e,this.propertiesByName=new Map,this.ctorArgs=null,this.lifecycle=m.INITIALIZING,this.store=new cs,this._origin=g.USER;const r=this.host.constructor.__accessorMetadata__;for(const n in r){const s=new ye(n,r[n]);this.propertiesByName.set(n,s)}this.metadata=r}initialize(){this.lifecycle=m.CONSTRUCTING}constructed(){this.lifecycle=m.CONSTRUCTED}destroy(){this.lifecycle=m.DESTROYED,this.propertiesByName.forEach(e=>e.destroy())}get initialized(){return this.lifecycle!==m.INITIALIZING}get(e){const r=this.propertiesByName.get(e);if(r.metadata.get)return r.getComputed(this);pt(r);const n=this.store;return n.has(e)?n.get(e):r.metadata.value}originOf(e){const r=this.store.originOf(e);if(r===void 0){const n=this.propertiesByName.get(e);if(n!==void 0&&n.flags&d.HasDefaultValue)return"defaults"}return Pt(r)}has(e){return this.propertiesByName.has(e)&&this.store.has(e)}keys(){return[...this.propertiesByName.keys()]}internalGet(e){const r=this.propertiesByName.get(e);if(W(r))return this.store.has(e)?this.store.get(e):r.metadata.value}internalSet(e,r){const n=this.propertiesByName.get(e);W(n)&&this._internalSet(n,r)}getDependsInfo(e,r,n){const s=this.propertiesByName.get(r);if(!W(s))return"";const o=new Set,a=k({onObservableAccessed:c=>o.add(c),onTrackingEnd:()=>{}},()=>s.metadata.get?.call(e));let i=`${n}${e.declaredClass.split(".").pop()}.${r}: ${a}
`;if(o.size===0)return i;n+="  ";for(const c of o)c instanceof ye&&(i+=`${n}${c.propertyName}: undefined
`);return i}setAtOrigin(e,r,n){const s=this.propertiesByName.get(e);if(W(s))return this._setAtOrigin(s,r,n)}isOverridden(e){const r=this.propertiesByName.get(e);return r!==void 0&&!!(r.flags&d.Overridden)}clearOverride(e){const r=this.propertiesByName.get(e);r&&r.flags&d.Overridden&&(r.flags&=~d.Overridden,r.notifyChange())}override(e,r){const n=this.propertiesByName.get(e);if(!me(n,e,r,this))return;const s=n.metadata.cast;if(s){const o=this._cast(s,r),{valid:a,value:i}=o;if($t.release(o),!a)return;r=i}n.flags|=d.Overridden,this._internalSet(n,r)}set(e,r){const n=this.propertiesByName.get(e);if(!me(n,e,r,this))return;const s=n.metadata.cast;if(s){const a=this._cast(s,r),{valid:i,value:c}=a;if($t.release(a),!i)return;r=c}const o=n.metadata.set;o?o.call(this.host,r):this._internalSet(n,r)}setDefaultOrigin(e){this._origin=as(e)}getDefaultOrigin(){return Pt(this._origin)}notifyChange(e){const r=this.propertiesByName.get(e);r!==void 0&&r.notifyChange()}invalidate(e){const r=this.propertiesByName.get(e);r!==void 0&&r.invalidate()}commit(e){const r=this.propertiesByName.get(e);r!==void 0&&r.commit()}_internalSet(e,r){const n=this.lifecycle!==m.INITIALIZING?this._origin:g.DEFAULTS;this._setAtOrigin(e,r,n)}_setAtOrigin(e,r,n){const s=this.store,o=e.propertyName;s.has(o,n)&&Vt(r,s.get(o))&&~e.flags&d.Overridden&&n===s.originOf(o)||(e.invalidate(),s.set(o,r,n),e.commit(),sr(this.host,e))}_cast(e,r){const n=$t.acquire();return n.valid=!0,n.value=r,e&&(n.value=e.call(this.host,r,n)),n}},us=class{constructor(){this.value=null,this.valid=!0}acquire(){this.valid=!0}release(){this.value=null}};const $t=new gt(us);let fs;function hs(){return fs}var _e;(function(t){t[t.Ignore=0]="Ignore",t[t.Destroy=1]="Destroy",t[t.ThrowError=2]="ThrowError"})(_e||(_e={}));function ds(t){t.length=0}let yr=class{constructor(e=50,r=50){this._pool=new gt(Array,void 0,ds,r,e)}acquire(){return this._pool.acquire()}release(e){this._pool.release(e)}prune(){this._pool.prune(0)}static acquire(){return vt.acquire()}static release(e){return vt.release(e)}static prune(){vt.prune()}};const vt=new yr(100);let ps=class extends gt{constructor(){super(...arguments),this._set=new Set}destroy(){super.destroy(),this._set=null}acquire(...e){const r=super.acquire(...e);return this._set.delete(r),r}release(e){e&&!this._set.has(e)&&(super.release(e),this._set.add(e))}_dispose(e){this._set.delete(e),super._dispose(e)}};const V=[];function mr(t){V.push(t),V.length===1&&queueMicrotask(()=>{const e=V.slice();V.length=0;for(const r of e)r()})}let _r=class{constructor(e,r=30){this.name=e,this._counter=0,this._samples=new Array(r)}record(e){e!=null&&(this._samples[++this._counter%this._samples.length]=e)}get median(){return this._samples.slice().sort((e,r)=>e-r)[Math.floor(this._samples.length/2)]}get average(){return this._samples.reduce((e,r)=>e+r,0)/this._samples.length}get last(){return this._samples[this._counter%this._samples.length]}};var It;(function(t){const e=(o,a,i,c)=>{let u=a,f=a;const h=i>>>1,p=o[u-1];for(;f<=h;){f=u<<1,f<i&&c(o[f-1],o[f])<0&&++f;const C=o[f-1];if(c(C,p)<=0)break;o[u-1]=C,u=f}o[u-1]=p},r=(o,a)=>o<a?-1:o>a?1:0;function n(o,a,i,c){a===void 0&&(a=0),i===void 0&&(i=o.length),c===void 0&&(c=r);for(let f=i>>>1;f>a;f--)e(o,f,i,c);const u=a+1;for(let f=i-1;f>a;f--){const h=o[a];o[a]=o[f],o[f]=h,e(o,u,f,c)}}function*s(o,a,i,c){a===void 0&&(a=0),i===void 0&&(i=o.length),c===void 0&&(c=r);for(let f=i>>>1;f>a;f--)e(o,f,i,c),yield;const u=a+1;for(let f=i-1;f>a;f--){const h=o[a];o[a]=o[f],o[f]=h,e(o,u,f,c),yield}}t.sort=n,t.iterableSort=s})(It||(It={}));const be=It,gs=1.5,ys=1.1;let br=class{constructor(e){this.data=[],this._length=0,this._allocator=void 0,this._deallocator=()=>null,this._shrink=()=>{},this._hint=new Oe,e&&(e.initialSize&&(this.data=new Array(e.initialSize)),e.allocator&&(this._allocator=e.allocator),e.deallocator!==void 0&&(this._deallocator=e.deallocator),e.shrink&&(this._shrink=()=>$e(this)))}toArray(){return this.data.slice(0,this.length)}filter(e){const r=new Array;for(let n=0;n<this._length;n++){const s=this.data[n];e(s)&&r.push(s)}return r}at(e){if((e=Math.trunc(e)||0)<0&&(e+=this._length),!(e<0||e>=this._length))return this.data[e]}includes(e,r){const n=this.data.indexOf(e,r);return n!==-1&&n<this.length}get length(){return this._length}set length(e){if(e>this._length){if(this._allocator){for(;this._length<e;)this.data[this._length++]=this._allocator(this.data[this._length]);return}this._length=e}else{if(this._deallocator)for(let r=e;r<this._length;++r)this.data[r]=this._deallocator(this.data[r]);this._length=e,this._shrink()}}clear(){this.length=0}prune(){this.clear(),this.data=[]}push(e){this.data[this._length++]=e}pushArray(e,r=e.length){for(let n=0;n<r;n++)this.data[this._length++]=e[n]}fill(e,r){for(let n=0;n<r;n++)this.data[this._length++]=e}pushNew(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));const e=this.data[this._length];return++this._length,e}unshift(e){this.data.unshift(e),this._length++,$e(this)}pop(){if(this.length===0)return;const e=this.data[this.length-1];return this.length=this.length-1,this._shrink(),e}remove(e){const r=At(this.data,e,this.length,this._hint);if(r!==-1)return this.data.splice(r,1),this.length=this.length-1,e}removeUnordered(e){return this.removeUnorderedIndex(At(this.data,e,this.length,this._hint))}removeUnorderedIndex(e){if(!(e>=this.length||e<0))return this.swapElements(e,this.length-1),this.pop()}removeUnorderedMany(e,r=e.length,n){this.length=xr(this.data,e,this.length,r,this._hint,n),this._shrink()}front(){if(this.length!==0)return this.data[0]}back(){if(this.length!==0)return this.data[this.length-1]}swapElements(e,r){if(e>=this.length||r>=this.length||e===r)return;const n=this.data[e];this.data[e]=this.data[r],this.data[r]=n}sort(e){be.sort(this.data,0,this.length,e)}iterableSort(e){return be.iterableSort(this.data,0,this.length,e)}some(e,r){for(let n=0;n<this.length;++n)if(e.call(r,this.data[n],n,this.data))return!0;return!1}find(e,r){for(let n=0;n<this.length;++n){const s=this.data[n];if(e.call(r,s,n))return s}}filterInPlace(e,r){let n=0;for(let s=0;s<this._length;++s){const o=this.data[s];e.call(r,o,s,this.data)&&(this.data[s]=this.data[n],this.data[n]=o,n++)}if(this._deallocator)for(let s=n;s<this._length;s++)this.data[s]=this._deallocator(this.data[s]);return this._length=n,this._shrink(),this}forAll(e,r){const{data:n,length:s}=this;for(let o=0;o<s;++o)e.call(r,n[o],o,n)}forEach(e,r){this.data.slice(0,this.length).forEach(e,r)}map(e,r){const n=new Array(this.length);for(let s=0;s<this.length;++s)n[s]=e.call(r,this.data[s],s,this.data);return n}reduce(e,r){let n=r;for(let s=0;s<this.length;++s)n=e(n,this.data[s],s,this.data);return n}has(e){const r=this.length,n=this.data;for(let s=0;s<r;++s)if(n[s]===e)return!0;return!1}*[Symbol.iterator](){for(let e=0;e<this.length;e++)yield this.data[e]}};function $e(t){t.data.length>gs*t.length&&(t.data.length=Math.floor(t.length*ys))}function ms(t){return{setTimeout:(e,r)=>{const n=t.setTimeout(e,r);return _(()=>t.clearTimeout(n))}}}const _s=ms(globalThis);function $r(t){return bs(t)||vr(t)}function bs(t){return t!=null&&typeof t=="object"&&"on"in t&&typeof t.on=="function"}function vr(t){return t!=null&&typeof t=="object"&&"addEventListener"in t&&typeof t.addEventListener=="function"}function $s(t,e,r){if(!$r(t))throw new TypeError("target is not a Evented or EventTarget object");return vr(t)?vs(t,e,r):t.on(e,r)}function vs(t,e,r,n){if(Array.isArray(e)){const s=e.slice();for(const o of s)t.addEventListener(o,r,n);return _(()=>{for(const o of s)t.removeEventListener(o,r,n)})}return t.addEventListener(e,r,n),_(()=>t.removeEventListener(e,r,n))}function wr(t,e,r){if(!$r(t))throw new TypeError("target is not a Evented or EventTarget object");if("once"in t)return t.once(e,r);const n=$s(t,e,s=>{n.remove(),r.call(t,s)});return n}function I(t="Aborted"){return new G("AbortError",t)}function Ar(t,e="Aborted"){if(Or(t))throw I(e)}function yt(t){return t instanceof AbortSignal?t:t?.signal}function Or(t){const e=yt(t);return e!=null&&e.aborted}function fi(t){if(mt(t))throw t}function hi(t){if(!mt(t))throw t}function st(t,e){const r=yt(t);if(r!=null){if(!r.aborted)return wr(r,"abort",()=>e());e()}}function di(t,e){const r=yt(t);if(r!=null)return Ar(r),wr(r,"abort",()=>e(I()))}function pi(t,e){return yt(e)==null?t:new Promise((r,n)=>{let s=st(e,()=>n(I()));const o=()=>{s=es(s)};t.then(o,o),t.then(r,n)})}function mt(t){return t?.name==="AbortError"}async function gi(t){try{return await t}catch(e){if(!mt(e))throw e;return}}async function yi(t,e=b.getLogger("esri")){try{return await t}catch(r){mt(r)||e.error(r)}}async function ws(t){if(!t)return;if(typeof t.forEach!="function"){const r=Object.keys(t),n=r.map(a=>t[a]),s=await ws(n),o={};return r.map((a,i)=>o[a]=s[i]),o}const e=t;return Promise.allSettled(e).then(r=>Array.from(e,(n,s)=>{const o=r[s];return o.status==="fulfilled"?{promise:n,value:o.value}:{promise:n,error:o.reason}}))}async function mi(t){return(await Promise.allSettled(t)).filter(e=>e.status==="fulfilled").map(e=>e.value)}async function _i(t){return(await Promise.allSettled(t)).filter(e=>e.status==="rejected").map(e=>e.reason)}function As(t,e=void 0,r){const n=new AbortController;return st(r,()=>n.abort()),new Promise((s,o)=>{let a=setTimeout(()=>{a=0,s(e)},t);st(n,()=>{a&&(clearTimeout(a),o(I()))})})}function bi(t,e,r,n){const s=r&&"abort"in r?r:null;n!=null||s||(n=r);let o=setTimeout(()=>{o=0,s?.abort()},e);const a=()=>n||new G("promiseUtils:timeout","The wrapped promise did not resolve within "+e+" ms");return t.then(i=>{if(o===0)throw a();return clearTimeout(o),i},i=>{throw clearTimeout(o),o===0?a():i})}function $i(t,e){const r=new AbortController,n=setTimeout(()=>r.abort(),e);return st(t,()=>{r.abort(),clearTimeout(n)}),{...t,signal:r.signal}}function Os(t){return t&&typeof t.then=="function"}function ve(t){return Os(t)?t:Promise.resolve(t)}function vi(t,e=-1){let r,n,s,o,a=null;const i=(...c)=>{if(r){n=c,o&&o.reject(I()),o=Dt();const p=o.promise;if(a){const C=a;a=null,C.abort()}return p}if(s=o||Dt(),o=null,e>0){const p=new AbortController;r=ve(t(...c,p.signal));const C=r;As(e).then(()=>{r===C&&(o?p.abort():a=p)})}else r=1,r=ve(t(...c));const u=()=>{const p=n;n=s=r=a=null,p!=null&&i(...p)},f=r,h=s;return f.then(u,u),f.then(h.resolve,h.reject),h.promise};return i}function Dt(){let t,e;const r=new Promise((s,o)=>{t=s,e=o}),n=s=>{t(s)};return n.resolve=s=>t(s),n.reject=s=>e(s),n.timeout=(s,o)=>_s.setTimeout(()=>n.reject(o),s),n.promise=r,n}function wi(t,e){return t.then(e,e)}async function Ai(t){await Promise.resolve(),Ar(t)}function Oi(t){return t}function Ti(t){return 1e3*t}function ki(t){return t}function Si(t){return .001*t}let Ts=class{constructor(e){this.phases=e,this.paused=!1,this.ticks=-1,this.removed=!1}},ks=class{constructor(e){this.callback=e,this.isActive=!0}remove(){this.isActive=!1}},Ut=0,xt=0;const D={time:0,deltaTime:0,elapsedFrameTime:0,frameDuration:0},Ft=["prepare","preRender","render","postRender","update","finish"],Rt=[],N=new br;class Ss{constructor(e){this._task=e}remove(){this._task.removed=!0}pause(){this._task.paused=!0}resume(){this._task.paused=!1}}function Es(){E!=null&&(cancelAnimationFrame(E),E=requestAnimationFrame(Xt))}const ot={frameTasks:N,willDispatch:!1,clearFrameTasks:Ns,dispatch:kr,executeFrameTasks:Cs,reschedule:Es};function js(t){const e=new ks(t);return Rt.push(e),ot.willDispatch||(ot.willDispatch=!0,mr(kr)),e}function Ni(t){const e=new Ts(t);return N.push(e),E==null&&(Ut=performance.now(),E=requestAnimationFrame(Xt)),new Ss(e)}let E=null;function Ns(t=!1){N.forAll(e=>{e.removed=!0}),t&&Tr()}function Ci(t){xt=Math.max(0,t)}function Xt(){const t=performance.now();E=null,E=N.length>0?requestAnimationFrame(Xt):null,ot.executeFrameTasks(t)}function Cs(t){const e=t-Ut;Ut=t;const r=xt>0?xt:1e3/60,n=Math.max(0,e-r);D.time=t,D.frameDuration=r-n;for(let s=0;s<Ft.length;s++){const o=performance.now(),a=Ft[s];N.forAll(i=>{i.paused||i.removed||(s===0&&i.ticks++,i.phases[a]&&(D.elapsedFrameTime=performance.now()-t,D.deltaTime=i.ticks===0?0:e,i.phases[a]?.call(i,D)))}),Is[s].record(performance.now()-o)}Tr(),Ds.record(performance.now()-t)}const H=new br;function Tr(){N.forAll(t=>{t.removed&&H.push(t)}),N.removeUnorderedMany(H.data,H.length),H.clear()}function kr(){for(;Rt.length;){const t=Rt.shift();t.isActive&&t.callback()}ot.willDispatch=!1}function Ms(t=1,e){const r=Dt(),n=()=>{Or(e)?r.reject(I()):t===0?r():(--t,mr(()=>n()))};return n(),r.promise}function Ps(t){return Ms(1,t)}async function Mi(){await Ps(),await new Promise(t=>requestAnimationFrame(t))}const Is=Ft.map(t=>new _r(t)),Ds=new _r("total");function Us(t,e){for(const r of t.entries())if(e(r[0]))return!0;return!1}function we(t,e){if(!e)return t;for(const r of e)t.add(r);return t}function xs(t,e){const r=new Set;return we(r,t),we(r,e),r}function Fs(t,e){const r=new Set;for(const n of e)t.has(n)&&r.add(n);return r}function Pi(t,e){if(!t||!e)return!1;if(t===e)return!0;for(const r of t)if(!e.has(r))return!1;return!0}function Ii(t,e){if(t==null&&e==null)return!0;if(t==null||e==null||t.size!==e.size)return!1;for(const r of t)if(!e.has(r))return!1;return!0}function Rs(t,e){const r=new Set(t);for(const n of e)r.delete(n);return r}function Di(t,e){return Rs(xs(t,e),Fs(t,e))}let zs=0;const Ui=0;function wt(){return++zs}class Qt{constructor(e){this._accessed=[],this._handles=[],this._observerObject=new Ls(e),Ae.register(this,new WeakRef(this._observerObject),this)}destroy(){Ae.unregister(this._observerObject),this._accessed.length=0,this._observerObject?.destroy(),this.clear()}onObservableAccessed(e){const r=this._accessed;r.includes(e)||r.push(e)}onTrackingEnd(){const e=this._handles,r=this._accessed,n=this._observerObject;for(let s=0;s<r.length;++s)e.push(r[s].observe(n));r.length=0}clear(){const e=this._handles;for(let r=0;r<e.length;++r)e[r].remove();e.length=0}}let Ls=class{constructor(e){this._notify=e,this._invalidCount=0,this.destroyed=!1}onInvalidated(){this._invalidCount++}onCommitted(){if(this.destroyed)return;const e=this._invalidCount;if(e===1)return this._invalidCount=0,void this._notify();this._invalidCount=e>0?e-1:0}destroy(){this.destroyed=!0,this._notify=qs}};const Ae=new FinalizationRegistry(t=>{t.deref()?.destroy()});function qs(){}let P=!1;const it=[];function Sr(t,e){let r=new Qt(o),n=null,s=!1;function o(){if(!r||s)return;if(P)return void jr(o);const i=n;r.clear(),P=!0,s=!0,n=k(r,t),s=!1,P=!1,e(n,i),Nr()}function a(){r&&(r.destroy(),r=null,n=null)}return s=!0,n=k(r,t),s=!1,_(a)}function Er(t,e){let r=new Qt(s),n=null;function s(){e(n,a)}function o(){r&&(r.destroy(),r=null),n=null}function a(){return r?(r.clear(),n=k(r,t),n):null}return a(),_(o)}function Fi(t){let e=new Qt(n),r=!1;function n(){e&&!r&&(P?jr(n):(e.clear(),P=!0,r=!0,k(e,t),r=!1,P=!1,Nr()))}function s(){e&&(e.destroy(),e=null)}return r=!0,k(e,t),r=!1,_(s)}function jr(t){it.includes(t)||it.unshift(t)}function Nr(){for(;it.length;)it.pop()()}var F;(function(t){t[t.Untracked=0]="Untracked",t[t.Tracked=1]="Tracked"})(F||(F={}));let q=class{constructor(){this.uid=wt(),this.removed=!1,this.type=null,this.oldValue=null,this.callback=null,this.getValue=null,this.target=null,this.path=null,this.equals=null}static acquireUntracked(e,r,n,s,o){return this.pool.acquire(F.Untracked,e,r,n,s,o,Vt)}static acquireTracked(e,r,n,s){return this.pool.acquire(F.Tracked,e,r,n,null,null,s)}notify(e,r){this.type===F.Untracked?this.callback.call(this.target,e,r,this.path,this.target):this.callback.call(null,e,r,void 0,void 0)}acquire(e,r,n,s,o,a,i){this.uid=wt(),this.removed=!1,this.type=e,this.oldValue=r,this.callback=n,this.getValue=s,this.target=o,this.path=a,this.equals=i}release(){this.target=this.path=this.oldValue=this.callback=this.getValue=null,this.uid=wt(),this.removed=!0}};q.pool=new ps(q);const Z=new yr,v=new Set;let at;function ct(t){v.delete(t),v.add(t),at||(at=js(Ws))}function Bs(t){if(t.removed)return;const e=t.oldValue,r=t.getValue();t.equals(e,r)||(t.oldValue=r,t.notify(r,e))}function Gs(t){for(const e of v.values())e.target===t&&(e.removed=!0)}function Ws(){let t=10;for(;at&&t--;){at=null;const e=Vs(),r=Z.acquire();for(const n of e){const s=n.uid;Bs(n),s===n.uid&&n.removed&&r.push(n)}for(const n of v)n.removed&&(r.push(n),v.delete(n));for(const n of r)q.pool.release(n);Z.release(r),Z.release(e),zt.forEach(n=>n())}}function Vs(){const t=Z.acquire();t.length=v.size;let e=0;for(const r of v)t[e]=r,++e;return v.clear(),t}const zt=new Set;function zi(t){return zt.add(t),_(()=>zt.delete(t))}function Hs(t,e,r){let n=Je(t,e,r,(s,o,a)=>{let i,c,u=Er(()=>dt(s,o),(f,h)=>{s.__accessor__?.lifecycle===m.DESTROYED||i&&i.uid!==c?n.remove():(i||(i=q.acquireUntracked(f,a,h,s,o),c=i.uid),ct(i))});return _(()=>{u.remove(),i&&(i.uid!==c||i.removed||(i.removed=!0,ct(i)),i=null),n=u=null})});return n}function Ks(t,e,r){const n=Je(t,e,r,(s,o,a)=>{let i=!1;return Sr(()=>dt(s,o),(c,u)=>{s.__accessor__.lifecycle!==m.DESTROYED?i||(i=!0,Vt(u,c)||a.call(s,c,u,o,s),i=!1):n.remove()})});return n}function Js(t,e,r,n=!1){return t.__accessor__&&t.__accessor__.lifecycle!==m.DESTROYED?n?Ks(t,e,r):Hs(t,e,r):_()}function Ys(t,e,r){let n,s,o=Er(t,(a,i)=>{n&&n.uid!==s?o.remove():(n||(n=q.acquireTracked(a,e,i,r),s=n.uid),ct(n))});return _(()=>{o.remove(),n&&(n.uid!==s||n.removed||(n.removed=!0,ct(n)),n=null),o=null})}function Zs(t,e,r){let n=!1;return Sr(t,(s,o)=>{n||(n=!0,r(o,s)||e(s,o),n=!1)})}function Li(t,e,r=!1,n=Wr){return r?Zs(t,e,n):Ys(t,e,n)}function qi(t){return Us(v,e=>e.oldValue===t)}var Cr,Mr;function Xs(t){if(t==null)return{value:t};if(Array.isArray(t))return{type:[t[0]],value:null};switch(typeof t){case"object":return t.constructor?.__accessorMetadata__||t instanceof Date?{type:t.constructor,value:t}:t;case"boolean":return{type:Boolean,value:t};case"string":return{type:String,value:t};case"number":return{type:Number,value:t};case"function":return{type:t,value:null};default:return}}const A=Symbol("Accessor-Handles"),Lt=Symbol("Accessor-Initialized");let Bi=class Pr{static createSubclass(e={}){if(Array.isArray(e))throw new Error("Multi-inheritance unsupported since 4.16");const{properties:r,declaredClass:n,constructor:s}=e;delete e.declaredClass,delete e.properties,delete e.constructor;const o=this;class a extends o{constructor(...c){super(...c),this.inherited=null,s&&s.apply(this,c)}}B(a.prototype);for(const i in e){const c=e[i];a.prototype[i]=typeof c=="function"?function(...u){const f=this.inherited;let h;this.inherited=function(...p){if(o.prototype[i])return o.prototype[i].apply(this,p)};try{h=c.apply(this,u)}catch(p){throw this.inherited=f,p}return this.inherited=f,h}:e[i]}for(const i in r){const c=Xs(r[i]);kn(c)(a.prototype,i)}return Kn(n)(a)}constructor(...e){if(this[Cr]=null,this[Mr]=!1,this.constructor===Pr)throw new Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");const r=new ls(this);Object.defineProperty(this,"__accessor__",{enumerable:!1,value:r}),e.length>0&&this.normalizeCtorArgs&&(r.ctorArgs=this.normalizeCtorArgs.apply(this,e))}postscript(e){const r=this.__accessor__,n=r.ctorArgs||e;r.initialize(),n&&(this.set(n),r.ctorArgs=null),r.constructed(),this.initialize(),this[Lt]=!0}initialize(){}[er](){this[A]=ts(this[A])}destroy(){this.destroyed||(Gs(this),this.__accessor__.destroy(),hs()?.onInstanceDestroy(this))}[Symbol.dispose](){this.destroy()}get constructed(){return this.__accessor__&&this.__accessor__.initialized||!1}get initialized(){return this[Lt]}get destroyed(){return this.__accessor__?.lifecycle===m.DESTROYED||!1}commitProperty(e){z(this,e)}get(e){return Xn(b.getLogger(this),"`Accessor.get` is deprecated in favor of using optional chaining",{version:"4.28",see:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Optional_chaining"}),z(this,e)}hasOwnProperty(e){return this.__accessor__?this.__accessor__.has(e):Object.prototype.hasOwnProperty.call(this,e)}keys(){return this.__accessor__?this.__accessor__.keys():[]}set(e,r){return et(this,e,r),this}watch(e,r,n){return Js(this,e,r,n)}addHandles(e,r){if(this.destroyed){const s=Array.isArray(e)?e:[e];for(const o of s)o.remove();return}let n=this[A];n==null&&(n=this[A]=new Qn),n.add(e,r)}removeHandles(e){const r=this[A];r?.remove(e)}removeAllHandles(){const e=this[A];e?.removeAll()}hasHandles(e){const r=this[A];return r!=null&&r.has(e)}_override(e,r){r===void 0?this.__accessor__.clearOverride(e):this.__accessor__.override(e,r)}_clearOverride(e){return this.__accessor__.clearOverride(e)}_overrideIfSome(e,r){r==null?this.__accessor__.clearOverride(e):this.__accessor__.override(e,r)}_isOverridden(e){return this.__accessor__.isOverridden(e)}notifyChange(e){this.__accessor__.notifyChange(e)}_get(e){return this.__accessor__.internalGet(e)}_set(e,r){return this.__accessor__.internalSet(e,r),this}};Cr=A,Mr=Lt;export{ws as $,Xr as A,Us as B,vi as C,Jo as D,Or as E,gn as F,Uo as G,Os as H,on as I,$o as J,pi as K,Dt as L,mi as M,fo as N,As as O,Ho as P,rn as Q,g as R,Bi as S,He as T,j as U,Eo as V,Ht as W,Mn as X,st as Y,I as Z,es as _,Dr as a,Ro as a$,wt as a0,Ni as a1,Ko as a2,Zo as a3,No as a4,vo as a5,lo as a6,Qn as a7,$s as a8,Zr as a9,yr as aA,z as aB,Wr as aC,ho as aD,mr as aE,Vt as aF,Co as aG,Ps as aH,Mi as aI,oo as aJ,K as aK,pn as aL,Do as aM,ro as aN,jo as aO,Go as aP,eo as aQ,Mo as aR,go as aS,yi as aT,qo as aU,dt as aV,Lo as aW,xo as aX,Bo as aY,mn as aZ,ni as a_,Ti as aa,ki as ab,wo as ac,Rs as ad,hi as ae,_s as af,Gr as ag,Re as ah,yt as ai,yo as aj,xs as ak,Ii as al,Pi as am,Fs as an,bo as ao,Lr as ap,gi as aq,Fi as ar,as,wr as at,Fr as au,di as av,wi as aw,io as ax,Se as ay,qt as az,w as b,Xe as b0,kt as b1,ee as b2,os as b3,gt as b4,Qo as b5,nn as b6,Li as b7,$r as b8,pr as b9,zi as bA,qi as bB,$i as bC,Di as bD,_r as bE,ve as bF,Si as bG,no as bH,lt as bI,ut as bJ,_o as bK,Ce as bL,Oo as bM,To as bN,Ao as bO,Rr as bP,to as bQ,Ir as bR,Qs as bS,ge as bT,Ui as bU,co as bV,Ci as bW,Xo as bX,Me as bY,en as ba,Jr as bb,Ln as bc,De as bd,bi as be,po as bf,Ai as bg,Wo as bh,Vo as bi,Qt as bj,k as bk,Xn as bl,ri as bm,Pt as bn,Gt as bo,Wt as bp,_i as bq,Io as br,En as bs,ao as bt,Ms as bu,Pe as bv,Ie as bw,Br as bx,qr as by,ps as bz,b as c,so as d,Kn as e,mt as f,_ as g,Oe as h,l as i,fi as j,Ar as k,br as l,O as m,Oi as n,So as o,ir as p,mo as q,ft as r,G as s,Yo as t,ts as u,js as v,pt as w,ko as x,kn as y,At as z};
