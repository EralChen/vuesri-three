import{W as s,dg as v,dt as x,ag as E,b3 as c}from"./chunk-JaFSy54E.js";import{y as i,e as b,s as m,k as F}from"./chunk-D_yTKJJf.js";const N=y=>{let e=class extends y{constructor(){super(...arguments),this.view=null}async fetchPopupFeaturesAtLocation(p,n){const{layer:r}=this;if(!p)throw new m("imagerylayerview:fetchPopupFeatures","Nothing to fetch without area",{layer:r});const{popupEnabled:u}=r,o=x(r,n);if(!u||o==null)throw new m("imagerylayerview:fetchPopupFeatures","Missing required popupTemplate or popupEnabled",{popupEnabled:u,popupTemplate:o});const d=await o.getRequiredFields();F(n);const t=new E;t.timeExtent=this.timeExtent,t.geometry=p,t.outFields=d,t.outSpatialReference=p.spatialReference;const{resolution:a,spatialReference:l}=this.view,w=this.view.type==="2d"?new c(a,a,l):new c(.5*a,.5*a,l),{returnTopmostRaster:h,showNoDataRecords:R}=o.layerOptions||{returnTopmostRaster:!0,showNoDataRecords:!1},f={returnDomainValues:!0,returnTopmostRaster:h,pixelSize:w,showNoDataRecords:R,signal:n?.signal};return r.queryVisibleRasters(t,f).then(g=>g)}canResume(){return!!super.canResume()&&!this.timeExtent?.isEmpty}};return s([i()],e.prototype,"layer",void 0),s([i()],e.prototype,"suspended",void 0),s([i(v)],e.prototype,"timeExtent",void 0),s([i()],e.prototype,"view",void 0),e=s([b("esri.views.layers.ImageryLayerView")],e),e};export{N as u};
